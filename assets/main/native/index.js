window.__require=function e(t,o,n){function r(a,c){if(!o[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var u=o[a]={exports:{}};t[a][0].call(u.exports,function(e){return r(t[a][1][e]||e)},u,u.exports,e,t,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({ANEvents:[function(e,t,o){"use strict";cc._RF.push(t,"c0b2f4qzM9Eo5pSHFx5c2PL","ANEvents"),Object.defineProperty(o,"__esModule",{value:!0}),o.EVENT_GET_ITEM=o.AD_EVENT_IOS_CAN_SHOW_AD=o.AD_EVENT_CANCELLED=o.AD_EVENT_COMPLETED=o.AD_EVENT_ERROR=o.AD_EVENT_LOADED=void 0,o.AD_EVENT_LOADED="AdSdkLoaded",o.AD_EVENT_ERROR="AdSdkError",o.AD_EVENT_COMPLETED="AdSdkCompleted",o.AD_EVENT_CANCELLED="AdSdkCancelled",o.AD_EVENT_IOS_CAN_SHOW_AD="AdSdkCanShowAd",o.EVENT_GET_ITEM="GetItem",cc._RF.pop()},{}],AYService:[function(e,t,o){"use strict";cc._RF.push(t,"fd6c91FIMRN+6KR4MN2LF/1","AYService"),Object.defineProperty(o,"__esModule",{value:!0}),o.AYService=void 0;var n,r,i,a,c,s,l=e("./Config"),u=e("./FBService"),d=e("./NativeSdk");u.default.isFB()||(n=window,r=document,i="script",n.fbq||(a=n.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},n._fbq||(n._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],(c=r.createElement(i)).async=!0,c.src="",(s=r.getElementsByTagName(i)[0]).parentNode.insertBefore(c,s)),fbq("init",l.FB_APP_ID),fbq("trackCustom","Activate App"),fbq("trackCustom","Platform_"+d.NativeSdk.name()));var p=function(){function e(){}return e.trackEvent=function(e,t){void 0===t&&(t=1),u.default.isFB()?FBInstant.logEvent(e,t):fbq("trackCustom",e,{value:t,app_id:l.FB_APP_ID})},e.trackError=function(e){u.default.isFB()?FBInstant.logEvent("error"):fbq("trackCustom","error",{message:e,app_id:l.FB_APP_ID})},e.trackWarning=function(e){u.default.isFB()?FBInstant.logEvent("warning"):fbq("trackCustom","warning",{message:e,app_id:l.FB_APP_ID})},e.trackResource=function(e,t,o){u.default.isFB()?FBInstant.logEvent(e+"_"+t,o):fbq("trackCustom",e+"_"+t,{value:o,app_id:l.FB_APP_ID})},e}();o.AYService=p,cc._RF.pop()},{"./Config":"Config","./FBService":"FBService","./NativeSdk":"NativeSdk"}],AddBoosterPage:[function(e,t,o){"use strict";cc._RF.push(t,"9b715CJFF1KV5aATSXrCe4k","AddBoosterPage"),Object.defineProperty(o,"__esModule",{value:!0}),o.AddBoosterPage=void 0;var n=e("../CoreGame/Booster"),r=e("../General/GameData"),i=e("../General/Helper"),a=e("./UIHelper"),c=e("./UISystem");o.AddBoosterPage=function(){return{view:function(){return m(".modal.opaque",[a.uiHeaderRoute("Activate Booster","/booster"),m(".scrollable",Object.keys(r.D.boosters).sort(function(e,t){return n.BOOSTERS[e].requiredLevel-n.BOOSTERS[t].requiredLevel}).map(function(e){var t=n.BOOSTERS[e],o=e,s=r.D.activeBoosters.includes(o),l=0===r.D.boosters[o];return m(".box.pointer",{key:e,onclick:function(){n.addBooster(o)&&(c.routeTo("/booster"),c.showToast(t.name+" has been activated"))}},m(".two-col",{class:l||s?"grey":"blue"},[m("div.fcc",[m("img.mr10",{src:i.getResourceUrl("boosters/"+e+".png"),style:{width:"30px"}}),m("span",t.name)]),m("div.text-s",s?"In Use":l?"No Time Left":a.iconB("add_box"))]))}))])}}},cc._RF.pop()},{"../CoreGame/Booster":"Booster","../General/GameData":"GameData","../General/Helper":"Helper","./UIHelper":"UIHelper","./UISystem":"UISystem"}],AudioController:[function(e,t,o){"use strict";cc._RF.push(t,"02da6miBbBBXKJMOX67Uq+a","AudioController");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GameData"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.click=null,t.freechest=null,t.gold=null,t.error=null,t.kaching=null,t.ballhit=null,t.ballcriticalhit=null,t.levelup=null,t}return r(t,e),t.prototype.playEffect=function(e,t){void 0===t&&(t=1),a.D.sound&&e&&cc.audioEngine.play(e,!1,t)},t.prototype.onLoad=function(){var e=this;cc.game.addPersistRootNode(this.node),a.G.audio&&cc.warn("Multiple AudioController found!"),a.G.audio=this,cc.resources.loadDir("sound",cc.AudioClip,function(t,o){for(var n in t&&cc.error(t),o.forEach(function(t){void 0!==e[t.name]?e[t.name]=t:cc.warn("File: "+t.name+" does not have a definition in AudioController")}),e)e.hasOwnProperty(n)&&(n.startsWith("_")||e[n]||cc.warn("Property: "+n+" is null, the sound file is missing"))})},i([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./GameData":"GameData"}],AutoResizeCanvas:[function(e,t,o){"use strict";cc._RF.push(t,"5815cpqIy1Oc6VLFebHxE+7","AutoResizeCanvas");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Helper"),c=cc._decorator,s=c.ccclass,l=(c.property,document.createElement("div"));l.style.height="100%",l.style.backgroundColor="#000000",l.style.zIndex="1",l.style.width="0",l.style.position="absolute";var u=l.cloneNode();u.style.right="0",document.body.appendChild(l),document.body.appendChild(u);var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.thresholdForCanvas=.75,t.thresholdForUI=.57,t.oldFitHeight=!1,t.oldFitWidth=!1,t.onResize=a.debounce(t.applyUIFix.bind(t),100),t}return r(t,e),t.prototype.onLoad=function(){this.canvas=this.getComponent(cc.Canvas),this.widget=this.getComponent(cc.Widget),this.oldFitHeight=this.canvas.fitHeight,this.oldFitWidth=this.canvas.fitWidth,this.applyUIFix(),this.applySafeAreaFix()},t.prototype.onEnable=function(){cc.view.on("canvas-resize",this.onResize,this)},t.prototype.onDisable=function(){cc.view.off("canvas-resize",this.onResize,this)},t.prototype.applySafeAreaFix=function(){var e=cc.winSize.height/cc.view.getFrameSize().height,t=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sait"),10)||0,o=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--saib"),10)||0,n=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sail"),10)||0,r=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sair"),10)||0;if(this.widget){this.widget.updateAlignment();var i=this.node.position,a=this.node.getAnchorPoint();this.widget.isAlignTop=this.widget.isAlignBottom=this.widget.isAlignLeft=this.widget.isAlignRight=!0,this.widget.top=t*e,this.widget.bottom=o*e,this.widget.left=n*e,this.widget.right=r*e,this.widget.updateAlignment();var c=this.node.position,s=a.x-(c.x-i.x)/this.node.width,l=a.y-(c.y-i.y)/this.node.height;this.node.setAnchorPoint(s,l)}},t.prototype.applyUIFix=function(){var e=this.canvas.designResolution,t=cc.view.getFrameSize().height/cc.view.getFrameSize().width*e.width/e.height;if(t<this.thresholdForCanvas?(this.canvas.fitHeight=!0,this.canvas.fitWidth=!0):(this.canvas.fitHeight=this.oldFitHeight,this.canvas.fitWidth=this.oldFitWidth),t<this.thresholdForUI){var o=cc.view.getFrameSize().height*cc.winSize.width/cc.winSize.height,n=(cc.view.getFrameSize().width-o)/2;document.documentElement.style.setProperty("--extra-left-right",n+"px"),l.style.width=n+"px",u.style.width=n+"px"}else document.documentElement.style.setProperty("--extra-left-right","0px"),l.style.width="0",u.style.width="0"},i([s],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./Helper":"Helper"}],AvatarLoader:[function(e,t,o){"use strict";cc._RF.push(t,"ae6e8N6/4dK/6Bs0XOFf+2l","AvatarLoader");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.loadUrlToSprite=void 0;var a=e("./FBService"),c=e("./Helper"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t}return r(t,e),t.prototype.onLoad=function(){this.sprite=this.getComponent(cc.Sprite),this.sprite&&d(a.getPhoto(a.default.getUser()),this.sprite,!1)},i([l],t)}(cc.Component));function d(e,t,o){cc.assetManager.loadRemote(e,{maxRetryCount:-1},function(n,r){if(n){var i="images/"+(c.hashCode(e)%30+1);cc.warn("Fails to load URL to Spite:",e,"try again with fallback URL:",i),cc.resources.load(i,cc.SpriteFrame,function(e,n){e?cc.error("Fails to load fallback URL to Spite: ",i):(n.getTexture().packable=o,t.spriteFrame=n)})}else r.packable=o,t.spriteFrame=new cc.SpriteFrame(r)})}o.default=u,o.loadUrlToSprite=d,cc._RF.pop()},{"./FBService":"FBService","./Helper":"Helper"}],BallPage:[function(e,t,o){"use strict";cc._RF.push(t,"84029n7P15IBJRDrqp4882g","BallPage"),Object.defineProperty(o,"__esModule",{value:!0}),o.BallPage=void 0;var n=e("../CoreGame/Gameplay"),r=e("../General/GameData"),i=e("../General/Helper"),a=e("./UIHelper"),c=e("./UISystem");o.BallPage=function(){return{view:function(){var e=n.ballAddCost(r.D.balls.length);return m(".modal.opaque",[a.uiHeaderRoute("Ball"),m(".scrollable",a.getNotification(),m(".btn.m15",{onclick:function(){n.trySpendGold(e)?(r.G.audio.playEffect(r.G.audio.click),n.addBall(new r.BallEntity)):(r.G.audio.playEffect(r.G.audio.error),c.showToast("Not enough gold to buy a ball"))}},[a.iconB("add_circle",24,5),"Ball $"+i.nf(e)]),r.D.balls.map(function(e,t){var o=n.ballUpgradeCost(t,e.hitPower);return m(".box",[m(".two-col",[m("div","Ball #"+(t+1)),m("div.blue","Level "+e.hitPower)]),m(".hr"),m(".two-col.text-m.text-desc",[m("div","Multiplier"),m("div",n.getHitpowerMultiplier(e.hitPower).round(2)+"x")]),m(".mt5",[m(".progress",m(".fill",{style:{width:100*n.getHitpowerProgress(e.hitPower)+"%"}}))]),m(".hr"),m(".two-col.text-m.text-desc",[m("div","Hitpower"),m("div",n.getHitpower(e.hitPower))]),m(".two-col.text-m.text-desc",[m("div","Total Damage"),m("div",i.nf(e.damageStat))]),m(".two-col.text-m.text-desc",[m("div","# Launches"),m("div",i.nf(e.launchStat))]),m(".action.text-m",[m("div",{class:r.D.gold>=o?"blue":"grey",onclick:function(){n.trySpendGold(o)?(r.G.audio.playEffect(r.G.audio.click),e.hitPower++):(r.G.audio.playEffect(r.G.audio.error),c.showToast("Not enough gold to upgrade ball"))}},[a.iconB("arrow_circle_up",24,5),"$"+i.nf(o)]),m("div",{onclick:function(){c.routeTo("/physics",{id:t})}},[a.iconB("build",20,5),"Physics"])])])}),m(".debug",[m(".btns",[m(".btn.outline.red.text-m",{onclick:function(){return r.D.lastPatchNoteIndex=-1}},"Reset What's New"),m(".btn.outline.red.text-m",{onclick:function(){r.D.lastPatchNoteIndex=cc.randi(0,r.WHATS_NEW.length-1),cc.log("D.lastPatchNoteIndex =",r.D.lastPatchNoteIndex)}},"Rand What's New")]),m(".sep10")]))])}}},cc._RF.pop()},{"../CoreGame/Gameplay":"Gameplay","../General/GameData":"GameData","../General/Helper":"Helper","./UIHelper":"UIHelper","./UISystem":"UISystem"}],BallPhysics:[function(e,t,o){"use strict";cc._RF.push(t,"89971ywLUVMppQyL7CfyXeS","BallPhysics"),Object.defineProperty(o,"__esModule",{value:!0}),o.BALL_PHYSICS=void 0;var n=e("../General/GameData"),r=e("../General/Helper"),i=e("./Gameplay"),a=Object.freeze(new n.BallEntity);o.BALL_PHYSICS=[{name:"Bounce",desc:"This one should be straightforward: it's the bouncing force when the ball hits the block",valueLabel:function(e){return e.bounce.round(2).toString()},upgradeCheck:function(e){return i.checkUpgrade("Bounce",e.bounce,a.bounce,.05,1,function(e){return e},function(e){return 3e3*Math.pow(9,e/2)})},upgrade:function(e){return e.bounce+=.05}},{name:"Max Speed",desc:"The maximum speed the ball can travel at after burst period ends",valueLabel:function(e){return r.nf(e.maxVelocity)},upgradeCheck:function(e){return i.checkUpgrade("Max Speed",e.maxVelocity,a.maxVelocity,10,1e3,function(e){return e/2},function(e){return 100*Math.pow(9,e/2)})},upgrade:function(e){return e.maxVelocity+=10}},{name:"Burst Count",desc:"This is how many blocks can the ball hit before the burst period ends. During burst period, the ball can exceed max speed",valueLabel:function(e){return r.nf(e.burstCount)},upgradeCheck:function(e){return i.checkUpgrade("Burst Count",e.burstCount,a.burstCount,1,10,function(e){return e},function(e){return 3e3*Math.pow(9,e/2)})},upgrade:function(e){return e.burstCount+=1}},{name:"Critical Bounce Chance",desc:"The chance that the ball will get a boost when it hits the block.",valueLabel:function(e){return r.formatPercent(e.criticalBounceChance)},upgradeCheck:function(e){return i.checkUpgrade("Critical Bounce Chance",e.criticalBounceChance,a.criticalBounceChance,.01,.5,function(e){return e/2},function(e){return 100*Math.pow(9,e/2)})},upgrade:function(e){return e.criticalBounceChance+=.01}},{name:"Critical Bounce Boost",desc:"The boost that the ball will get when a critical bounce happens.",valueLabel:function(e){return e.criticalBounceBoost.round(1)+"x"},upgradeCheck:function(e){return i.checkUpgrade("Critical Bounce Boost",e.criticalBounceBoost,a.criticalBounceBoost,.1,5,function(e){return e/2},function(e){return 300*Math.pow(9,e/2)})},upgrade:function(e){return e.criticalBounceBoost+=.1}}],cc._RF.pop()},{"../General/GameData":"GameData","../General/Helper":"Helper","./Gameplay":"Gameplay"}],Ball:[function(e,t,o){"use strict";cc._RF.push(t,"91748yt5VZEnZfBWBJeI5Ee","Ball");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.EVENT_BALL_DESTROYED=void 0;var a=e("../General/GameData"),c=e("../General/Helper"),s=e("../MetaGame/Critical"),l=e("../UI/UISystem"),u=e("./Block"),d=e("./Gameplay"),p=cc._decorator,f=p.ccclass,m=p.property;o.EVENT_BALL_DESTROYED="BallDestroyed";var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.contactCount=0,t.staticFrameCount=0,t.tail=null,t}return r(t,e),t.prototype.onLoad=function(){this.rb=this.getComponent(cc.RigidBody),this.rb.enabledContactListener=!0,this.collider=this.getComponent(cc.PhysicsCollider),this.camera=cc.Camera.findCamera(this.node)},t.prototype.onEnable=function(){cc.director.getPhysicsManager().on("before-step",this.beforePhysicsStep,this)},t.prototype.onDisable=function(){cc.director.getPhysicsManager().off("before-step",this.beforePhysicsStep,this)},Object.defineProperty(t.prototype,"velocity",{set:function(e){this.rb.linearVelocity=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entity",{get:function(){return this._entity},set:function(e){this._entity=e,this.collider.restitution=this._entity.bounce},enumerable:!1,configurable:!0}),t.prototype.onEndContact=function(e,t,o){if(cc.isValid(this.node,!0)){var n=o.node.getComponent(u.default);if(n){var r=d.getHitpower(this.entity.hitPower);a.D.blockHitSound&&a.G.audio.playEffect(a.G.audio.ballhit),Math.random()<this.entity.criticalBounceChance?(this.rb.linearVelocity=this.rb.linearVelocity.mulSelf(this.entity.criticalBounceBoost),r=Math.floor(r*this.entity.criticalBounceBoost),this.criticalHitAnimation(),a.D.blockHitSound&&a.G.audio.playEffect(a.G.audio.ballcriticalhit)):a.D.blockHitSound&&a.G.audio.playEffect(a.G.audio.ballhit),this.contactCount++,this.tail.active=this.contactCount<=this.entity.burstCount,this.entity.damageStat+=Math.min(r,n.life),n.life-=r}this.checkMaxVelocity()}},t.prototype.criticalHitAnimation=function(){c.findComponent(s.default).play(this.camera.getWorldToScreenPoint(this.node.getWorldPosition()))},t.prototype.beforePhysicsStep=function(){if(cc.isValid(this.node,!0)){this.rb.applyForceToCenter(cc.v2(0,this.entity.gravity*this.rb.getMass()),!1);var e=this.node.width/2,t=640-this.node.width/2;this.checkMaxVelocity(),Math.abs(this.rb.linearVelocity.x)>1&&(this.node.x<=e||this.node.x>=t)&&(this.node.x=cc.misc.clampf(this.node.x,e,t),this.rb.linearVelocity=cc.v2(-this.rb.linearVelocity.x*this.entity.bounce,this.rb.linearVelocity.y*this.entity.bounce));var o=this.camera.getWorldToScreenPoint(this.node.getWorldPosition());o.y+this.node.height/2>=cc.winSize.height&&(this.rb.linearVelocity=cc.v2(this.rb.linearVelocity.x*this.entity.bounce,-Math.abs(this.rb.linearVelocity.y*this.entity.bounce))),o.y-this.node.height/2<0&&this.collect()}},t.prototype.lateUpdate=function(){cc.isValid(this.node,!0)&&this.checkBallStuck()},t.prototype.checkBallStuck=function(){this.previousPos||(this.previousPos=this.node.position),this.node.position.subSelf(this.previousPos).magSqr()<1?this.staticFrameCount++:(this.previousPos=this.node.position,this.staticFrameCount=0),this.staticFrameCount>=2*cc.game.getFrameRate()&&(a.G.audio.playEffect(a.G.audio.error),l.showToast("A ball seems stuck and has been automatically collected"),this.collect())},t.prototype.checkMaxVelocity=function(){var e=this.rb.linearVelocity.magSqr();this.contactCount<=this.entity.burstCount&&e>a.D.launchSpeed*a.D.launchSpeed&&(this.rb.linearVelocity=this.rb.linearVelocity.normalizeSelf().mulSelf(a.D.launchSpeed)),this.contactCount>this.entity.burstCount&&e>this.entity.maxVelocity*this.entity.maxVelocity&&(this.rb.linearVelocity=this.rb.linearVelocity.normalizeSelf().mulSelf(this.entity.maxVelocity))},t.prototype.collect=function(){var e=this.node.parent;this.node.destroy(),a.T.ballsToLaunch.push(this.entity),e.dispatchEvent(new cc.Event.EventCustom(o.EVENT_BALL_DESTROYED,!0))},i([m(cc.Node)],t.prototype,"tail",void 0),i([f],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../General/GameData":"GameData","../General/Helper":"Helper","../MetaGame/Critical":"Critical","../UI/UISystem":"UISystem","./Block":"Block","./Gameplay":"Gameplay"}],Block:[function(e,t,o){"use strict";cc._RF.push(t,"79836Vr1s1L7JAJS1tcIKQa","Block");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.EVENT_BLOCK_DESTROYED=void 0;var a=e("../General/GameData"),c=e("../General/Helper"),s=e("../MetaGame/EnergyFlying"),l=e("../MetaGame/GoldFlying"),u=e("./Booster"),d=e("./Gameplay"),p=e("./World"),f=cc._decorator,m=f.ccclass,h=f.property;o.EVENT_BLOCK_DESTROYED="BlockDestroyed";var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lifeLabel=null,t._life=0,t}return r(t,e),Object.defineProperty(t.prototype,"life",{get:function(){return this._life},set:function(e){var t=this;if(e<=0)cc.isValid(this.node,!0)&&cc.isValid(this.node.parent,!0)?(this.goldFlyingAnimation(),this.node.removeFromParent(!1),this.node.destroy(),this.world.node.dispatchEvent(new cc.Event.EventCustom(o.EVENT_BLOCK_DESTROYED,!0))):cc.log("Block: Life = "+e+" < 0, but the node is not valid any more!");else{if(this.lifeLabel.string=e.toString(),!this.tween&&e<this._life){this.tween=cc.tween(this.node).to(.1,{opacity:100},{easing:cc.easing.quadIn}).to(.1,{opacity:255},{easing:cc.easing.quadOut}).call(function(){return t.tween=null}).start();var n=this.lifeLabel.node.scale;cc.tween(this.lifeLabel.node).to(.1,{scale:1.5*n},{easing:cc.easing.quadIn}).to(.1,{scale:n},{easing:cc.easing.quadOut}).start()}e<this._life&&this.rollEnergy()}var r=cc.misc.clampf(this._life-Math.max(e,0),0,1/0);a.D.gold+=r,a.D.goldPerMinMultiplier=0,u.isActivated("earningx125")&&(a.D.goldPerMinMultiplier+=.25),u.isActivated("earningx15")&&(a.D.goldPerMinMultiplier+=.5),u.isActivated("earningx175")&&(a.D.goldPerMinMultiplier+=.75),u.isActivated("earningx2")&&(a.D.goldPerMinMultiplier+=1),u.isActivated("pinkx2")&&"Pink"===this.color&&(a.D.goldPerMinMultiplier+=1),u.isActivated("purplex2")&&"Purple"===this.color&&(a.D.goldPerMinMultiplier+=1),u.isActivated("greenx2")&&"Green"===this.color&&(a.D.goldPerMinMultiplier+=1),u.isActivated("orangex2")&&"Orange"===this.color&&(a.D.goldPerMinMultiplier+=1),u.isActivated("yellowx2")&&"Yellow"===this.color&&(a.D.goldPerMinMultiplier+=1),u.isActivated("bluex2")&&"Blue"===this.color&&(a.D.goldPerMinMultiplier+=1),d.addGold(r*a.D.goldPerMinMultiplier),this._life=e},enumerable:!1,configurable:!0}),t.prototype.rollEnergy=function(){Math.random()>a.D.energyChance||(a.D.energy[this.color]++,this.energyFlyingAnimation())},t.prototype.onLoad=function(){this.life=1,this.world=c.findComponent(p.default),this.color=Object.keys(a.BLOCK_COLORS).randOne(),this.node.color=a.BLOCK_COLORS[this.color],this.goldFlying=c.findComponent(l.default),this.energyFlying=c.findComponent(s.default)},t.prototype.goldFlyingAnimation=function(){var e=cc.Camera.findCamera(this.node);this.goldFlying.play(e.getWorldToScreenPoint(this.node.getWorldPosition()))},t.prototype.energyFlyingAnimation=function(){var e=cc.Camera.findCamera(this.node);this.energyFlying.play(e.getWorldToScreenPoint(this.node.getWorldPosition()),this.node.color)},t.prototype.onTouch=function(){a.G.audio.playEffect(a.G.audio.ballhit),this.life-=d.getHitpower(a.D.fingerHitPower)},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouch,this,!0)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouch,this,!0)},i([h(cc.Label)],t.prototype,"lifeLabel",void 0),i([m],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../General/GameData":"GameData","../General/Helper":"Helper","../MetaGame/EnergyFlying":"EnergyFlying","../MetaGame/GoldFlying":"GoldFlying","./Booster":"Booster","./Gameplay":"Gameplay","./World":"World"}],BoosterDetailPage:[function(e,t,o){"use strict";cc._RF.push(t,"5fd95plLE5LmLaJ25vljp0r","BoosterDetailPage"),Object.defineProperty(o,"__esModule",{value:!0}),o.BoosterDetailPage=void 0;var n=e("../CoreGame/Booster"),r=e("../General/GameData"),i=e("../General/Helper"),a=e("./UIHelper"),c=e("./UISystem");o.BoosterDetailPage=function(){return{view:function(){var e=m.route.param("id"),t=n.BOOSTERS[e],o=m("div.grey",["Inactive"]),s=n.isActivated(e);return s&&(o=m("div.red",{onclick:function(){n.removeBooster(e),c.routeTo("/booster"),c.showToast(t.name+" has been deactivated. You can add a new one to replace it")}},[a.iconB("portable_wifi_off",24,5),"Deactivate"])),m(".modal.opaque",[a.uiHeaderRoute("Booster","/booster"),m(".scrollable",[t.info().map(function(e){return m(".box.banner.text-m",e)}),m("div.text-center",m("img",{src:i.getResourceUrl("boosters/"+e+".png")})),m(".box",[m(".two-col",[m("div",[m("div",t.name),m(".text-desc.text-s",t.description)]),m(".ml10",{class:"booster-"+t.rarity.toLowerCase()},t.rarity)]),m(".hr"),m(".two-col",[m("div",[m("div","Time Left"),m("div.text-s.text-desc","This booster will automatically be deactivated when time runs out")]),m(".blue.row.ml10",[a.iconB("access_time",24,5),m("div",""+i.formatHM(r.D.boosters[e]))])]),m(".hr"),m(".two-col",[m("div",[m("div","Consume Type"),m("div.text-s.text-desc","This booster's time is only consumed when you are "+t.consumeWhen.toLowerCase())]),m(".blue.ml10",""+t.consumeWhen)]),m(".action",[o,m("div",{onclick:function(){c.routeTo("/booster")}},"Go Back")])]),m(".text-center.text-desc.text-s",{style:{display:s?"block":"none"}},"\ud83d\udca1 To replace this booster, deactivate it first")])])}}},cc._RF.pop()},{"../CoreGame/Booster":"Booster","../General/GameData":"GameData","../General/Helper":"Helper","./UIHelper":"UIHelper","./UISystem":"UISystem"}],BoosterPackPage:[function(e,t,o){"use strict";cc._RF.push(t,"eb81cMyMZ5BqryojD0Dmp63","BoosterPackPage"),Object.defineProperty(o,"__esModule",{value:!0}),o.BoosterPackPage=void 0;var n=e("../CoreGame/Booster"),r=e("../General/GameData"),i=e("../General/Helper"),a=e("./UIHelper");o.BoosterPackPage=function(){var e;return{oninit:function(){setTimeout(function(){r.G.audio.playEffect(r.G.audio.freechest),m.route.param("starter")?e=n.openBoosterPack(240):(r.D.nextBoosterTime=Date.now()+r.D.boosterTimer,e=n.openBoosterPack()),m.redraw()},cc.randi(1e3,2e3))},view:function(){var t=[m(".sep20"),m(".loader")],o=!!m.route.param("starter");return e&&(t=["Common","Rare","Epic"].map(function(t){return m(".box",e[t].filter(function(e){return e.minute>0}).map(function(e,t){var o=n.BOOSTERS[e.booster];return[m(".hr",{style:{display:0===t?"none":"block"}}),m(".two-col",[m(".fcc",[m("img.mr10",{src:i.getResourceUrl("boosters/"+e.booster+".png"),style:{width:"30px"}}),m("span",{class:"booster-"+o.rarity.toLowerCase()},o.name)]),m(".blue","+"+e.minute+" min")])]}))})),m(".modal.opaque",[a.uiHeaderRoute("Booster Pack",o?"/main":"/booster"),m(".scrollable",t)])}}},cc._RF.pop()},{"../CoreGame/Booster":"Booster","../General/GameData":"GameData","../General/Helper":"Helper","./UIHelper":"UIHelper"}],BoosterPage:[function(e,t,o){"use strict";cc._RF.push(t,"f4e3d30UStA94HT77hDE4ZR","BoosterPage"),Object.defineProperty(o,"__esModule",{value:!0}),o.BoosterPage=o.DEFAULT_COST=o.COST_OVERRIDE=void 0;var n=e("../CoreGame/Booster"),r=e("../CoreGame/Gameplay"),i=e("../General/GameData"),a=e("../General/Helper"),c=e("./UIHelper"),s=e("./UISystem");o.COST_OVERRIDE=[0,5e3,1e4,1e4,2e4,2e4],o.DEFAULT_COST=5e4,o.BoosterPage=function(){var e=m(".debug",[m(".btns",[m(".btn.outline.red.text-m",{onclick:function(){for(var e in i.D.boosters)Object.prototype.hasOwnProperty.call(i.D.boosters,e)&&(i.D.boosters[e]+=1*a.HOUR)}},"+Booster"),m(".btn.outline.red.text-m",{onclick:function(){return i.D.nextBoosterTime=0}},"Booster Timer")])]);return{view:function(){for(var t=[],o=function(e){if(e<i.D.boosterSlots){var o=i.D.activeBoosters[e];o?t.push(m("div.booster-item",{class:"booster-"+n.BOOSTERS[o].rarity.toLowerCase(),onclick:function(){s.routeTo("/booster-detail",{id:o})}},[m("img",{src:a.getResourceUrl("boosters/"+o+".png")}),m(".action",n.BOOSTERS[o].name)])):t.push(m("div.booster-item",{onclick:function(){s.routeTo("/add-booster")}},[m("img",{src:a.getResourceUrl("boosters/empty.png")}),m(".action","Empty Slot")]))}else t.push(m("div.booster-item",{onclick:function(){i.G.audio.playEffect(i.G.audio.error),s.showToast("This slot is locked, you need to unlock it first")}},[m("img",{src:a.getResourceUrl("boosters/lock.png")}),m(".action.locked","Locked")]))},l=0;l<i.MAX_BOOSTER_SLOTS;l++)o(l);var u,d=Object.keys(n.BOOSTERS),p=i.D.nextBoosterTime-Date.now();u=p>0?m(".action.disabled",m("div",[c.iconB("access_time",20,5),"Next Booster in "+a.formatHM(p)])):m(".action.filled",{onclick:function(){s.routeTo("/booster-pack")}},m("div",[c.iconB("offline_bolt",20,5),"Claim Booster Pack"]));var f=n.getBoosterDist(),h=r.getBoosterUnlockGemCost();return m(".modal.opaque",[c.uiHeaderRoute("Booster"),m(".scrollable",[m(".sep10"),m(".booster",t),m(".sep5"),m(".btn.mh15.outline",{class:i.D.boosterSlots>=i.MAX_BOOSTER_SLOTS?"disabled":"",onclick:function(){i.D.boosterSlots>=i.MAX_BOOSTER_SLOTS?(i.G.audio.playEffect(i.G.audio.error),s.showToast("You have unlocked all slots already")):r.trySpendGem(h)?(i.G.audio.playEffect(i.G.audio.click),i.D.boosterSlots++):(i.G.audio.playEffect(i.G.audio.error),s.showToast("Not enough gem to unlock a slot"))}},[c.iconB("lock_open",24,5),i.D.boosterSlots>=i.MAX_BOOSTER_SLOTS?"All Slots Unlocked":"Unlock Slot \ud83d\udc8e "+a.nf(h)]),m(".sep10"),e,m(".box",[m(".two-col",[m("div",[m("div","Booster Pack Cooldown"),m(".text-desc.text-s","You can claim one booster pack every "+a.formatHM(i.D.boosterTimer)+". It will not stack")]),m("div.blue.ml10",""+a.formatHM(i.D.boosterTimer))]),m(".hr"),m(".two-col",[m("div",[m("div","Booster Pack Level"),m(".text-desc.text-s","Your booster pack will contain "+f.totalMinute+"m of booster time: "+f.commonMinute+"m of COMMON, "+f.rareMinute+"m of RARE and "+f.epicMinute+"m of EPIC")]),m("div.blue.ml10.nobreak","Lvl "+i.D.level)]),u]),m(".sep5"),m("div.mh15.text-l","Boosterpedia"),m(".box",d.sort(function(e,t){return n.BOOSTERS[e].requiredLevel-n.BOOSTERS[t].requiredLevel}).map(function(e,t){var o=e,r=n.BOOSTERS[o],c=i.D.activeBoosters.includes(o),l=0===i.D.boosters[o];return[m(".hr",{style:{display:0===t?"none":"block"}}),m(".two-col.pointer",{onclick:function(){s.routeTo("/booster-detail",{id:e})}},[m("div.fcc",[m("img.mr10",{src:a.getResourceUrl("boosters/"+e+".png"),style:{width:"30px"}}),m("span",{class:"booster-"+r.rarity.toLowerCase()},r.name)]),m("div.text-s",{class:c?"blue":"grey"},r.requiredLevel>i.D.level?"Require Level "+r.requiredLevel:c?"In Use":l?"No Time Left":a.formatHM(i.D.boosters[o])+" Left")])]}))])])}}},cc._RF.pop()},{"../CoreGame/Booster":"Booster","../CoreGame/Gameplay":"Gameplay","../General/GameData":"GameData","../General/Helper":"Helper","./UIHelper":"UIHelper","./UISystem":"UISystem"}],Booster:[function(e,t,o){"use strict";cc._RF.push(t,"219ddftGkFEarY9LPPSkq8p","Booster"),Object.defineProperty(o,"__esModule",{value:!0}),o.refreshRecipe=o.getEnergyForGem=o.getMinuteForGem=o.tickBooster=o.openBoosterPack=o.getBoosterDist=o.hasOfflineEarning=o.isActivated=o.removeBooster=o.addBooster=o.BOOSTERS=o.Rarity=o.BoosterType=void 0;var n,r,i=e("../General/GameData"),a=e("../General/Helper"),c=e("../UI/UISystem"),s=e("./Gameplay");function l(e){var t=i.D.activeBoosters.indexOf(e);-1!==t?(i.D.activeBoosters.splice(t,1),i.markDataDirty()):cc.error("Trying to remove a booster that does not exist! Booster = ",e)}function u(e){return-1!==i.D.activeBoosters.indexOf(e)}function d(){var e=Math.round(cc.misc.clampf(240*Math.sqrt(i.D.level),0,720));return{totalMinute:e,commonMinute:Math.round(.7*e),rareMinute:Math.round(.25*e),epicMinute:Math.round(.05*e)}}function p(e,t){var o=0;e.shuffle().forEach(function(n,r){n.minute=cc.misc.clampf(cc.randi(r===e.length-1?t-o:1,t),0,t-o),o+=n.minute,i.D.boosters[n.booster]+=n.minute*a.MINUTE})}function f(e,t){switch(t){case r.Common:return 75*e;case r.Rare:return 25*e;case r.Epic:return 5*e}}function m(e){return e*Math.sqrt(i.D.balls.length)*10}(function(e){e.Online="Online",e.Offline="Offline"})(n=o.BoosterType||(o.BoosterType={})),function(e){e.Common="Common",e.Rare="Rare",e.Epic="Epic"}(r=o.Rarity||(o.Rarity={})),o.BOOSTERS={collect2s:{name:"2s Collect Time",description:"Reduce collection time to 2s (from "+s.INITIAL_COLLECT_DELAY+"s)",consumeWhen:n.Online,rarity:r.Common,requiredLevel:1,canLoad:function(){return!i.D.activeBoosters.includes("collect1s")},info:function(){return[]}},collect1s:{name:"1s Collect Time",description:"Reduce collection time to 1s (from "+s.INITIAL_COLLECT_DELAY+"s)",consumeWhen:n.Online,rarity:r.Rare,requiredLevel:4,canLoad:function(){return!i.D.activeBoosters.includes("collect2s")},info:function(){return[]}},offline1h:{name:"+1h Offline Earning",description:"Extra 1 hour of offline earning time",consumeWhen:n.Offline,rarity:r.Common,requiredLevel:4,canLoad:function(){return!0},info:function(){var e=[];return u("offline1h")&&e.push("This booster only takes effect when you are offline"),i.D.boosters.offline1h<a.HOUR&&e.push("You have less than 1 hour left for this booster, it will only take effect for the time left"),e}},offline2h:{name:"+2h Offline Earning",description:"Extra 2 hour of offline earning time",consumeWhen:n.Offline,rarity:r.Rare,requiredLevel:8,canLoad:function(){return!0},info:function(){var e=[];return u("offline2h")&&e.push("This booster only takes effect when you are offline"),i.D.boosters.offline2h<2*a.HOUR&&e.push("You have less than 2 hours left for this booster, it will only take effect for the time left"),e}},offline4h:{name:"+4h Offline Earning",description:"Extra 4 hour of offline earning time",consumeWhen:n.Offline,rarity:r.Epic,requiredLevel:12,canLoad:function(){return!0},info:function(){var e=[];return u("offline4h")&&e.push("This booster only takes effect when you are offline"),i.D.boosters.offline4h<4*a.HOUR&&e.push("You have less than 4 hours left for this booster, it will only take effect for the time left"),e}},earningx125:{name:"x1.25 Earning",description:"Online Earning x 1.25",consumeWhen:n.Online,rarity:r.Rare,requiredLevel:1,canLoad:function(){return!0},info:function(){return[]}},earningx15:{name:"x1.5 Earning",description:"Online Earning x 1.5",consumeWhen:n.Online,rarity:r.Rare,requiredLevel:3,canLoad:function(){return!0},info:function(){return[]}},earningx175:{name:"x1.75 Earning",description:"Online Earning x 1.75",consumeWhen:n.Online,rarity:r.Epic,requiredLevel:5,canLoad:function(){return!0},info:function(){return[]}},earningx2:{name:"x2 Earning",description:"Online Earning x 2",consumeWhen:n.Online,rarity:r.Epic,requiredLevel:7,canLoad:function(){return!0},info:function(){return[]}},pinkx2:{name:"Pink Block x2",description:"Gain double the gold from pink blocks",consumeWhen:n.Online,rarity:r.Epic,requiredLevel:1,canLoad:function(){return!0},info:function(){return[]}},purplex2:{name:"Purple Block x2",description:"Gain double the gold from purple blocks",consumeWhen:n.Online,rarity:r.Rare,requiredLevel:2,canLoad:function(){return!0},info:function(){return[]}},greenx2:{name:"Green Block x2",description:"Gain double the gold from green blocks",consumeWhen:n.Online,rarity:r.Rare,requiredLevel:3,canLoad:function(){return!0},info:function(){return[]}},orangex2:{name:"Orange Block x2",description:"Gain double the gold from orange blocks",consumeWhen:n.Online,rarity:r.Rare,requiredLevel:4,canLoad:function(){return!0},info:function(){return[]}},yellowx2:{name:"Yellow Block x2",description:"Gain double the gold from yellow blocks",consumeWhen:n.Online,rarity:r.Common,requiredLevel:5,canLoad:function(){return!0},info:function(){return[]}},bluex2:{name:"Blue Block x2",description:"Gain double the gold from blue blocks",consumeWhen:n.Online,rarity:r.Common,requiredLevel:6,canLoad:function(){return!0},info:function(){return[]}}},o.addBooster=function(e){var t=o.BOOSTERS[e];if(t.requiredLevel>i.D.level)c.showToast('Cannot activate "'+t.name+'" booster: you need to be at least level '+t.requiredLevel);else if(0!==i.D.boosters[e]){if(!i.D.activeBoosters.includes(e))return t.canLoad()?(i.D.activeBoosters.push(e),i.markDataDirty(),!0):(c.showToast('Cannot activate "'+t.name+"\" booster: there's a conflicting booster currently active"),!1);c.showToast('Cannot activate "'+t.name+'" booster: it is already active')}else c.showToast('Cannot activate "'+t.name+"\" booster: you don't have enough time left")},o.removeBooster=l,o.isActivated=u,o.hasOfflineEarning=function(){return!0},o.getBoosterDist=d,o.openBoosterPack=function(e){void 0===e&&(e=0);var t=Object.keys(o.BOOSTERS),n=[],c=[],s=[];if(t.forEach(function(t){if(!(i.D.level<o.BOOSTERS[t].requiredLevel)){switch(o.BOOSTERS[t].rarity){case r.Common:n.push({booster:t,minute:e});break;case r.Rare:c.push({booster:t,minute:e});break;case r.Epic:s.push({booster:t,minute:e})}i.D.boosters[t]+=e*a.MINUTE}}),e<=0){var l=d(),u=(l.totalMinute,l.commonMinute),f=l.rareMinute,m=l.epicMinute;p(n,u),p(c,f),p(s,m)}return{Common:n,Rare:c,Epic:s}},o.tickBooster=function(){i.D.activeBoosters.forEach(function(e){o.BOOSTERS[e].consumeWhen!==n.Offline&&(i.D.boosters[e]-=a.SECOND,i.D.boosters[e]<=0&&l(e))})},o.getMinuteForGem=f,o.getEnergyForGem=m,o.refreshRecipe=function(){var e=Object.keys(o.BOOSTERS).shuffle().filter(function(e){return i.D.level>=o.BOOSTERS[e].requiredLevel}).shuffle();i.D.recipes=[];for(var t=0;t<Math.min(e.length,3);t++){for(var n=e[t],r=o.BOOSTERS[n],a=t+1,c={booster:n,require:[],minuteProduced:f(a,r.rarity),gem:a},s=Object.keys(i.BLOCK_COLORS).shuffle(),l=m(a,r.rarity),u=0;u<Math.min(s.length,3);u++){var d=s[u];c.require.push({color:d,amount:cc.randi(.75*l,1.25*l)})}i.D.recipes.push(c)}},cc._RF.pop()},{"../General/GameData":"GameData","../General/Helper":"Helper","../UI/UISystem":"UISystem","./Gameplay":"Gameplay"}],Clock:[function(e,t,o){"use strict";cc._RF.push(t,"e4c0fuON9lN+LR3Jrm2MTYe","Clock");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pointer=null,t}return r(t,e),t.prototype.onEnable=function(){cc.tween(this.pointer.node).by(2,{angle:-90},{easing:cc.easing.smooth}).repeatForever().start()},i([s(cc.Sprite)],t.prototype,"pointer",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],Collect:[function(e,t,o){"use strict";cc._RF.push(t,"4e180WnUYlJC7X/9YKpfryv","Collect");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../General/GameData"),c=e("../General/Helper"),s=e("./Ball"),l=e("./Gameplay"),u=e("./Launcher"),d=e("./World"),p=cc._decorator,f=p.ccclass,m=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isCollecting=!1,t.lastAutoCollect=a.D.autoCollect,t.ballsParent=null,t}return r(t,e),t.prototype.onLoad=function(){this.launcher=c.findComponent(u.default),this.world=c.findComponent(d.default),this.world.node.on(s.EVENT_BALL_DESTROYED,this.updateStatus,this),a.T.ballsToLaunch=a.D.balls.slice(0),this.updateStatus()},t.prototype.update=function(){!this.lastAutoCollect&&a.D.autoCollect&&this.updateStatus(),this.lastAutoCollect=a.D.autoCollect},t.prototype.updateStatus=function(){var e=a.T.ballsToLaunch.length>0;this.node.parent.active=e,e&&a.D.autoCollect&&this.collect()},t.prototype.collect=function(){var e=this;if(!(this.isCollecting||a.T.ballsToLaunch.length<=0)){var t=l.collectDelay();cc.tween(this.node).call(function(){return e.isCollecting=!0}).by(t,{angle:360*t}).call(function(){e.isCollecting=!1,e.launcher.launch(a.T.ballsToLaunch.shift()),e.updateStatus()}).start()}},i([m(cc.Node)],t.prototype,"ballsParent",void 0),i([f],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../General/GameData":"GameData","../General/Helper":"Helper","./Ball":"Ball","./Gameplay":"Gameplay","./Launcher":"Launcher","./World":"World"}],Config:[function(e,t,o){"use strict";cc._RF.push(t,"a6aea7CUG1OxrNEUkwnfgJt","Config"),Object.defineProperty(o,"__esModule",{value:!0}),o.TIPS=o.GM_GAME_ID=o.GD_GAME_ID=o.NAME_CHANGE_COST=o.GAME_DATA_LS_KEY=o.COUPON=o.APPSTORE_URL=o.GOOGLE_PLAY_URL=o.TROPHY_PER_MATCH=o.CITIES=o.SCENES=o.INTERSTITIAL_PLACEMENT_ID=o.REWARD_VIDEO_PLACEMENT_ID=o.FB_APP_ID=void 0;var n=e("./Helper"),r=e("./NativeSdk");o.FB_APP_ID=374796077053535,o.REWARD_VIDEO_PLACEMENT_ID="374796077053535_417946606071815",o.INTERSTITIAL_PLACEMENT_ID="374796077053535_417947116071764",o.SCENES={Loading:"Loading",Main:"Main"},o.CITIES=[{name:"Beginner",entryFee:100,requiredTrophy:0,maxTrophy:30},{name:"Intermediate",entryFee:500,requiredTrophy:30,maxTrophy:60},{name:"Advanced",entryFee:1e3,requiredTrophy:60,maxTrophy:150},{name:"Expert",entryFee:5e3,requiredTrophy:150,maxTrophy:500},{name:"Champion",entryFee:1e4,requiredTrophy:500,maxTrophy:Number.MAX_SAFE_INTEGER}],o.TROPHY_PER_MATCH=4,o.GOOGLE_PLAY_URL="https://play.google.com/store/apps/details?id=com.fishpondstudio.ipb",o.APPSTORE_URL="https://apps.apple.com/us/app/idle-pinball-breakout/id1543064728",o.COUPON="TENK",o.GAME_DATA_LS_KEY="IdlePinballBreakout",o.NAME_CHANGE_COST=1e4,o.GD_GAME_ID="",o.GM_GAME_ID="",o.TIPS=["You need to activate both Auto Aim and Auto Collect boosters to enable offline earning","Some boosters are only found in higher levels","Offline Boosters and only consumed when you are offline","Upgrading a ball's physics has a big impact on its performance"],r.isFB()||o.TIPS.push("Setting your name is free for the first time. Changing it later will cost "+n.nf(o.NAME_CHANGE_COST)+" gold"),cc._RF.pop()},{"./Helper":"Helper","./NativeSdk":"NativeSdk"}],CraftPage:[function(e,t,o){"use strict";cc._RF.push(t,"9db77gnwY1BdqWuPagCWvQl","CraftPage"),Object.defineProperty(o,"__esModule",{value:!0}),o.CraftPage=void 0;var n=e("../CoreGame/Booster"),r=e("../General/GameData"),i=e("../General/Helper"),a=e("../General/NativeSdk"),c=e("./UIHelper"),s=e("./UISystem");o.CraftPage=function(){var e=m(".debug",[m(".btns",[m(".btn.outline.red.text-m",{onclick:function(){r.D.energy={Blue:0,Pink:0,Yellow:0,Green:0,Orange:0,Purple:0}}},"Reset Energy"),m(".btn.outline.red.text-m",{onclick:function(){r.D.energy={Blue:1e3,Pink:1e3,Yellow:1e3,Green:1e3,Orange:1e3,Purple:1e3}}},"+Energy")]),m(".sep10"),m(".btns",[m(".btn.outline.red.text-m",{onclick:function(){r.D.nextRecipeAt=0}},"Reset Recipe Timer"),m(".btn.outline.red.text-m",{onclick:function(){n.refreshRecipe(),m.redraw()}},"Refresh Recipe")])]),t=!1,o=!1;return{oninit:function(){r.D.nextRecipeAt<=Date.now()&&(r.D.nextRecipeAt=Date.now()+24*i.HOUR,o=!0,n.refreshRecipe())},view:function(){return a.NativeSdk.canShowRewardVideo().then(function(e){t=e,m.redraw()}),m(".modal.opaque",[c.uiHeaderRoute("Craft"),m(".col.subheader.text-desc.text-m",{style:{justifyContent:"space-around"}},Object.keys(r.BLOCK_COLORS).map(function(e){return m(".two-col",[c.iconB("flash_on",20,0,{color:r.BLOCK_COLORS[e].toCSS()}),""+i.nf(r.D.energy[e])])})),m(".scrollable",[m(".box",[m("div","Today's Recipes"),m(".hr"),m(".two-col",{style:{display:o?"none":"flex"}},[m(".text-m.text-desc","Recipes will refresh in"),m(".fcc",[c.iconB("access_time",20,5),i.formatHM(r.D.nextRecipeAt-Date.now())])]),m(".text-m.orange",{style:{display:o?"flex":"none"}},"Recipes have been refreshed just now, craft on!"),m(".hr"),m(".two-col",[m(".text-m.text-desc","Chance to get \u26a1 for each hit"),m(".div",i.formatPercent(r.D.energyChance))]),m(".action",{style:{display:t?"block":"none"},onclick:function(){s.showLoader(),a.NativeSdk.showRewardVideo().then(function(){s.hideLoader(),r.G.audio.playEffect(r.G.audio.levelup),s.showToast("Your recipes have been refreshed!"),n.refreshRecipe(),m.redraw()}).catch(function(){s.hideLoader(),r.G.audio.playEffect(r.G.audio.error),s.showToast("Fail to complete reward video")})}},m("div","Refersh Now \ud83c\udfac"))]),r.D.recipes.map(function(e){var t=n.BOOSTERS[e.booster];return m(".box",[m(".two-col",[m("div.fcc",m("img.mr10",{src:i.getResourceUrl("boosters/"+e.booster+".png"),style:{width:"30px"}}),m("span",{class:"booster-"+t.rarity.toLowerCase()},t.name)),m(".text-m","+"+e.minuteProduced+"min")]),m(".hr"),m(".two-col.text-desc",[m(".text-m","Ingredents"),m(".fcc",e.require.map(function(e){return[c.iconB("flash_on",20,0,{color:r.BLOCK_COLORS[e.color].toCSS(),marginLeft:"10px"}),e.amount]}))]),m(".hr"),m(".two-col.text-desc",[m(".text-s",["Craft ",m("span.green",e.minuteProduced+"min")," worth of booster, it will cost the ingredients listed above"]),m(".blue.ml20.pointer",{onclick:function(){e.require.every(function(e){return r.D.energy[e.color]>=e.amount})?(r.G.audio.playEffect(r.G.audio.levelup),e.require.forEach(function(e){return r.D.energy[e.color]-=e.amount}),r.D.boosters[e.booster]+=e.minuteProduced*i.MINUTE,s.showToast("You have crafted "+e.minuteProduced+'min "'+t.name+'" booster')):(r.G.audio.playEffect(r.G.audio.error),s.showToast("You do not have enough energy \u26a1 to craft this booster"))}},"Craft")]),m(".hr"),m(".two-col.text-desc",[m(".text-s",["Sell ",m("span.green",e.minuteProduced+"min")," worth of booster, you will get "+e.gem+"\ud83d\udc8e. You currently have ",m("span.green",i.formatHM(r.D.boosters[e.booster]))," left in your inventory"]),m(".blue.ml20.pointer",{onclick:function(){r.D.boosters[e.booster]>=e.minuteProduced*i.MINUTE?(r.G.audio.playEffect(r.G.audio.levelup),r.D.boosters[e.booster]-=e.minuteProduced*i.MINUTE,r.D.gem+=e.gem,s.showToast("You have sold "+e.minuteProduced+'min "'+t.name+'" booster for '+e.gem+" \ud83d\udc8e")):(r.G.audio.playEffect(r.G.audio.error),s.showToast("You do not have enough booster to sell"))}},"Sell")])])}),e])])}}},cc._RF.pop()},{"../CoreGame/Booster":"Booster","../General/GameData":"GameData","../General/Helper":"Helper","../General/NativeSdk":"NativeSdk","./UIHelper":"UIHelper","./UISystem":"UISystem"}],Critical:[function(e,t,o){"use strict";cc._RF.push(t,"21ad1sI+jZG4b4DYFyMksVa","Critical");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.play=function(e){var t=cc.instantiate(this.node);t.parent=this.node.parent,t.setWorldPosition(e);var o=t.scale;t.scale=0,t.opacity=0,cc.tween(t).to(.25,{scale:o,opacity:255},{easing:cc.easing.quadIn}).to(.75,{y:t.y+250,opacity:0,scale:.5*o},{easing:cc.easing.quadIn}).call(function(){return t.destroy()}).start()},i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],EnergyAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"9c6d686dRBK2Jj8rm7lEaJH","EnergyAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ResourceAnimation"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([s],t)}(a.default));o.default=l,cc._RF.pop()},{"./ResourceAnimation":"ResourceAnimation"}],EnergyFlying:[function(e,t,o){"use strict";cc._RF.push(t,"68461moW29FqbpqD3Qp4aIT","EnergyFlying");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GoldFlying"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.play=function(t,o){var n=e.prototype.makeNode.call(this);n.color=o,e.prototype.animate.call(this,n,t)},i([s],t)}(a.EntityFlying));o.default=l,cc._RF.pop()},{"./GoldFlying":"GoldFlying"}],Extensions:[function(e,t){"use strict";cc._RF.push(t,"f6168qK9v1DwJmwXRHujnG3","Extensions"),Number.prototype.round=function(e){var t=Math.pow(10,e);return Math.round(this*t)/t},Array.prototype.randOne=function(){return this[Math.floor(this.length*Math.random())]},Array.prototype.shuffle=function(){for(var e,t=this.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1));e=[this[o],this[t]],this[t]=e[0],this[o]=e[1]}return this},Array.prototype.uniq=function(){return this.filter(function(e,t,o){return o.indexOf(e)===t})},cc.Node.prototype.getWorldPosition=function(){return this.parent.convertToWorldSpaceAR(this.position)},cc.Node.prototype.setWorldPosition=function(e){this.position=this.parent.convertToNodeSpaceAR(e)},cc.Node.prototype.relativeFrom=function(e){return this.parent.convertToNodeSpaceAR(e.getWorldPosition())},cc.Node.prototype.follow=function(e){this.position=this.relativeFrom(e)},cc.Node.prototype.angleTo=function(e){var t=e.sub(this.getWorldPosition());return 180*-Math.atan2(t.x,t.y)/Math.PI},cc.Node.prototype.getAttr=function(e){return this[e]},cc.Vec2.prototype.clampDistance=function(e,t){var o=this.mag();return o<e?this.normalize().mul(e):o>t?this.normalize().mul(t):this},cc.spriteFrameFromBase64=function(e){return new Promise(function(t){var o=new Image;o.src=e,o.onload=function(){var e=new cc.Texture2D;e.initWithElement(o),e.handleLoadedTexture();var n=new cc.SpriteFrame(e);t(n)}})},cc.takeScreenshot=function(e,t,o){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===o&&(o=0),new Promise(function(n){cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){var r;if(e>0){var i=document.createElement("canvas"),a=i.getContext("2d");i.width=e,i.height=e;var c=Math.min(cc.game.canvas.width,cc.game.canvas.height),s=(cc.game.canvas.width-c)/2+t,l=(cc.game.canvas.height-c)/2+o;a.drawImage(cc.game.canvas,s,l,c,c,0,0,e,e),r=i.toDataURL()}else r=cc.game.canvas.toDataURL();cc.director.off(cc.Director.EVENT_AFTER_DRAW),n(r)})})},cc.normalizeAngle=function(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e},cc.randi=function(e,t){return Math.round(cc.randf(e,t))},cc.randf=function(e,t){return e+(t-e)*Math.random()},cc.urlIs=function(e){return window.location.hash==="!"+e},cc.hasScene=function(e){for(var t=0,o=cc.game.config.scenes;t<o.length;t++)if(o[t].url.endsWith(e+".fire"))return!0;return!1},cc.vibrate=function(e){return!!navigator.vibrate&&navigator.vibrate(e)},cc.Graphics&&(cc.Graphics.prototype.dashedLine=function(e,t,o,n){void 0===o&&(o=10),void 0===n&&(n=20);var r=e,i=0,a=t.sub(e);if(!(a.mag()<10))for(var c=a.normalize();(t.x-r.x)*c.x>=0&&(t.y-r.y)*c.y>=0;)i%2==0?(this.moveTo(r.x,r.y),r=r.add(c.mul(o))):(this.lineTo(r.x,r.y),r=r.add(c.mul(n))),i++}),cc._RF.pop()},{}],FBService:[function(e,t,o){"use strict";cc._RF.push(t,"db026AQaqVEKJ+ar5JtNZUB","FBService"),Object.defineProperty(o,"__esModule",{value:!0}),o.getPhotoFromLeaderboard=o.getPhoto=o.getPhotoFromId=void 0;var n=e("./Helper"),r={l:null,m:null,s:null},i=null,a=function(){function e(){}return e.FBInstant=function(e,t){void 0===t&&(t=null),this.isFB()?e(FBInstant):t&&t()},e.isFB=function(){return-1===window.location.href.indexOf(":7456")&&"undefined"!=typeof FBInstant},e.setSessionData=function(t){e.isFB()&&(t.leaderboard&&(r.l=t.leaderboard.map(function(e){return[e.getPlayer().getName(),e.getScore(),e.getRank()]})),t.myScore&&(r.m=[t.myScore.getPlayer().getName(),t.myScore.getScore(),t.myScore.getRank()]),t.scheduledMessage&&(r.s=t.scheduledMessage),FBInstant.setSessionData(r))},e.logEvent=function(e,t,o){this.isFB()&&FBInstant.logEvent(e,t,o)},e.setName=function(t){e.getUser().name=t,cc.sys.localStorage.setItem("user",JSON.stringify(i))},e.getUser=function(){if(e.isFB())return{id:FBInstant.player.getID(),name:FBInstant.player.getName(),photo:FBInstant.player.getPhoto()};if(i)return i;var t=cc.sys.localStorage,o=t.getItem("user");if(o)i=JSON.parse(o);else{var r=n.uuidv4();i={id:r,name:"Player "+r.substr(0,5),photo:null},t.setItem("user",JSON.stringify(i))}return i},e}();function c(e){return n.getResourceUrl("images/"+(n.hashCode(e)%30+1)+".png")}o.default=a,o.getPhotoFromId=c,o.getPhoto=function(e){return e.photo&&e.photo.startsWith("http")?e.photo:c(e.id)},o.getPhotoFromLeaderboard=function(e){return e.photo&&e.photo.startsWith("http")?e.photo:c(e._id)},cc._RF.pop()},{"./Helper":"Helper"}],FirstTime:[function(e,t,o){"use strict";cc._RF.push(t,"a697ffd+YlDc4UUNdLeqmV4","FirstTime"),Object.defineProperty(o,"__esModule",{value:!0}),o.FirstTime=void 0;var n=e("../General/GameData"),r=e("../General/Helper"),i=e("./UISystem");o.FirstTime=function(){var e=[r.getResourceUrl("images/ftue1.png"),r.getResourceUrl("images/ftue2.png"),r.getResourceUrl("images/ftue3.png"),r.getResourceUrl("images/ftue4.png")],t=e.shift();return{view:function(){return m("div.modal.opaque.pointer",{onclick:function(){n.G.audio.playEffect(n.G.audio.click),0===e.length?i.routeTo("/booster-pack",{starter:1}):t=e.shift()}},[m("img",{src:t,style:{maxHeight:"80%",maxWidth:"95%",alignSelf:"center",borderRadius:"10px"}}),m(".sep20"),m(".text-center.text-desc.text-s","TAP ANYWHERE TO CONTINUE")])}}},cc._RF.pop()},{"../General/GameData":"GameData","../General/Helper":"Helper","./UISystem":"UISystem"}],FixiOS14:[function(e,t){"use strict";cc._RF.push(t,"e5039pmY01EEac8ZK9Q5CEj","FixiOS14"),cc.game.on(cc.game.EVENT_ENGINE_INITED,function(){cc.sys.os===cc.sys.OS_IOS&&cc.sys.isBrowser&&/(iPhone OS 1[4-9])|(Version\/1[4-9][\.\d]*)|(iOS 1[4-9])|(iPad; CPU OS 1[4-9])/.test(window.navigator.userAgent)&&(cc.MeshBuffer.prototype.checkAndSwitchBuffer=function(e){this.vertexOffset+e>65535&&(this.uploadData(),this._batcher._flush())},cc.MeshBuffer.prototype.forwardIndiceStartToOffset=function(){this.uploadData(),this.switchBuffer()}),cc.Label.prototype._resetFrame=function(){var e;!this._frame||this.font instanceof cc.BitmapFont||((e=this._frame)&&e._original&&cc.dynamicAtlasManager&&(cc.dynamicAtlasManager.deleteAtlasSpriteFrame(e),e._resetDynamicAtlasFrame()),this._frame=null)}}),cc._RF.pop()},{}],GameData:[function(e,t,o){"use strict";cc._RF.push(t,"b1d0avhNUJGQ5ufiexSnRyh","GameData"),Object.defineProperty(o,"__esModule",{value:!0}),o.saveData=o.markLeaderbaordClean=o.markLeaderbaordDirty=o.markDataClean=o.markDataDirty=o.loadData=o.D=o.BallEntity=o.ORIGINAL_GAMEDATA=o.INVESTMENT_CONFIGS=o.GameData=o.WHATS_NEW=o.BLOCK_COLORS=o.MAX_BOOSTER_SLOTS=o.T=o.TempData=o.G=o.ENERGY_COST=o.ENERGY_PER_MIN=o.MAX_ENERGY=void 0;var n=e("./Config"),r=e("./Helper"),i=e("./NativeSdk");o.MAX_ENERGY=60,o.ENERGY_PER_MIN=1,o.ENERGY_COST=20;o.G=new function(){};var a=function(){this.routeParam=null,this.ballsToLaunch=[]};o.TempData=a,o.T=new a,o.MAX_BOOSTER_SLOTS=9,o.BLOCK_COLORS={Green:cc.color().fromHEX("#00cec9"),Purple:cc.color().fromHEX("#6c5ce7"),Pink:cc.color().fromHEX("#e84393"),Orange:cc.color().fromHEX("#e17055"),Yellow:cc.color().fromHEX("#fdcb6e"),Blue:cc.color().fromHEX("#0984e3")},o.WHATS_NEW=["Auto Aim and Auto Collect are no longer boosters - they are now part of the launcher. This frees up two booster slots. You can turn them on/off in Launcher page","Offline earnings are enabled by default - you no longer need to activate Auto Aim and Auto Collect","Introducing upgrade multiplier: for every 10th level of upgrade, you will get a 25% multiplier","Crafting requirement for Rare and Epic boosters have been reduced - now you can easily craft Rare and Epic boosters."];var c=function(){this.version=2,this.blockHitSound=!0,this.sound=!0,this.music=!0,this.hasSetName=!1,this.lastPatchNoteIndex=-1,this.gold=1e4,this.goldSpend=0,this.goldEarned=0,this.goldHistory=[],this.goldPerMin=0,this.goldPerMinUI=0,this.goldPerMinMultiplier=0,this.currentLevelRows=0,this.currentLevelAvgHp=0,this.investment=null,this.balls=[],this.launchSpeed=200,this.launcherAimSpeed=50,this.fingerHitPower=1,this.nextRecipeAt=0,this.energy={Blue:0,Pink:0,Green:0,Orange:0,Yellow:0,Purple:0},this.energyChance=.1,this.gem=5,this.level=1,this.nextBoosterTime=0,this.boosterTimer=4*r.HOUR,this.lastTickAt=Date.now(),this.activeBoosters=[],this.boosters={},this.recipes=[],this.boosterSlots=3,this.autoCollect=!0,this.autoAim=!0,this.offlineEarningMinutes=120*r.MINUTE};o.GameData=c,o.INVESTMENT_CONFIGS=[{hour:2,baseMultiplier:1,returnMultiplier:1.25},{hour:4,baseMultiplier:2,returnMultiplier:1.5},{hour:4,baseMultiplier:3,returnMultiplier:1.75},{hour:8,baseMultiplier:4,returnMultiplier:2}],o.ORIGINAL_GAMEDATA=Object.freeze(new c);o.BallEntity=function(e){void 0===e&&(e={}),this.maxVelocity=100,this.hitPower=1,this.bounce=.5,this.criticalBounceChance=.1,this.criticalBounceBoost=1.2,this.burstCount=1,this.gravity=-320,this.damageStat=0,this.launchStat=0,Object.assign(this,e)};var s=!1,l=!1;o.D=new Proxy(new c,{set:function(e,t,o){var n=e[t]!==o;return s=s||n,"trophy"===t&&s&&(cc.log("Trophy changed, old = "+e[t]+", new = "+o),l=!0),e[t]=o,!0}}),o.loadData=function(){return i.NativeSdk.getItem(n.GAME_DATA_LS_KEY)},o.markDataDirty=function(){s=!0,cc.log("%cMarking data dirty: dataDirty = "+s+", leaderboardDirty = "+l,"color:orange")},o.markDataClean=function(){s=!1,cc.log("%cMarking data clean: dataDirty = "+s+", leaderboardDirty = "+l,"color:green")},o.markLeaderbaordDirty=function(){l=!0,cc.log("%cMarking leaderboard dirty: dataDirty = "+s+", leaderboardDirty = "+l,"color:orange")},o.markLeaderbaordClean=function(){l=!1,cc.log("%cMarking leaderboard clean: dataDirty = "+s+", leaderboardDirty = "+l,"color:green")},o.saveData=function(){s&&(s=!1,i.NativeSdk.setItem(n.GAME_DATA_LS_KEY,JSON.stringify(o.D))),l&&(l=!1)},cc._RF.pop()},{"./Config":"Config","./Helper":"Helper","./NativeSdk":"NativeSdk"}],Gameplay:[function(e,t,o){"use strict";cc._RF.push(t,"abe31+Uas1GKbOZshjNvFA4","Gameplay"),Object.defineProperty(o,"__esModule",{value:!0}),o.getHitpowerProgress=o.getHitpowerMultiplier=o.getHitpower=o.prestige=o.getPrestigeGem=o.launcherAimSpeedUpgrade=o.checkLauncherAimSpeedUpgrade=o.launchSpeedUpgrade=o.checkLaunchSpeedUpgrade=o.getBoosterUnlockGemCost=o.consumeOfflineEarningBooster=o.getOfflineEarningTime=o.fingerHitPowerUpgrade=o.fingerHitPowerUpgradeCost=o.checkUpgrade=o.rowCountForLevel=o.ballAddCost=o.ballUpgradeCost=o.addGold=o.trySpendGem=o.collectDelay=o.INITIAL_COLLECT_DELAY=o.trySpendGold=o.addBall=o.calculateGoldPerMin=o.beforeGameStart=o.beforeFirstEverGameStart=void 0;var n=e("../General/GameData"),r=e("../General/Helper"),i=e("./Ball"),a=e("./Booster"),c=e("./World");function s(e,t,o,i,a,c,s){if(t>a)return[1/0,"Max "+e];var l=Math.round((t-o)/i),u=Math.floor(c(l));if(n.D.level<u)return[1/0,"Require Level "+u];var d=s(l);return[d,"Upgrade $"+r.nf(d)+" (+"+i+")"]}o.beforeFirstEverGameStart=function(){n.D.balls.push(new n.BallEntity)},o.beforeGameStart=function(){Object.keys(a.BOOSTERS).forEach(function(e){n.D.boosters[e]||(n.D.boosters[e]=0)}),Object.keys(n.D.boosters).forEach(function(e){a.BOOSTERS[e]||delete n.D.boosters[e]})},o.calculateGoldPerMin=function(){for(;n.D.goldHistory.length>=60;)n.D.goldHistory.shift();n.D.goldHistory.push(n.D.gold+n.D.goldSpend-n.D.goldEarned),n.D.goldPerMin=60*(n.D.goldHistory[n.D.goldHistory.length-1]-n.D.goldHistory[0])/n.D.goldHistory.length,n.D.goldPerMinUI=n.D.goldPerMin*(1+n.D.goldPerMinMultiplier)},o.addBall=function(e){n.D.balls.push(e),n.T.ballsToLaunch.push(e),r.findComponent(c.default).node.dispatchEvent(new cc.Event.EventCustom(i.EVENT_BALL_DESTROYED,!0))},o.trySpendGold=function(e){return!(n.D.gold<e||(n.D.goldSpend+=e,n.D.gold-=e,0))},o.INITIAL_COLLECT_DELAY=3,o.collectDelay=function(){return n.D.activeBoosters.includes("collect1s")?1:n.D.activeBoosters.includes("collect2s")?2:o.INITIAL_COLLECT_DELAY},o.trySpendGem=function(e){return!(n.D.gem<e||(n.D.gem-=e,0))},o.addGold=function(e){n.D.goldEarned+=e,n.D.gold+=e},o.ballUpgradeCost=function(e,t){return Math.round(Math.pow(99,Math.pow(e,.25))*Math.pow(1.25,t))},o.ballAddCost=function(e){return Math.round(Math.pow(999,Math.sqrt(e)))},o.rowCountForLevel=function(){return Math.round(50*Math.sqrt(n.D.level))},o.checkUpgrade=s;o.fingerHitPowerUpgradeCost=function(){var e=(n.D.fingerHitPower-n.ORIGINAL_GAMEDATA.fingerHitPower)/1;return Math.round(Math.pow(999,Math.pow(n.D.balls.length,.1))*Math.pow(1.25,e))},o.fingerHitPowerUpgrade=function(){n.D.fingerHitPower+=1},o.getOfflineEarningTime=function(){var e=n.D.offlineEarningMinutes;return n.D.activeBoosters.includes("offline1h")&&(e+=Math.min(n.D.boosters.offline1h,r.HOUR)),n.D.activeBoosters.includes("offline2h")&&(e+=Math.min(n.D.boosters.offline2h,2*r.HOUR)),n.D.activeBoosters.includes("offline4h")&&(e+=Math.min(n.D.boosters.offline4h,4*r.HOUR)),e},o.consumeOfflineEarningBooster=function(){n.D.activeBoosters.includes("offline1h")&&(n.D.boosters.offline1h-=Math.min(n.D.boosters.offline1h,r.HOUR)),n.D.activeBoosters.includes("offline2h")&&(n.D.boosters.offline2h-=Math.min(n.D.boosters.offline2h,2*r.HOUR)),n.D.activeBoosters.includes("offline4h")&&(n.D.boosters.offline4h-=Math.min(n.D.boosters.offline4h,4*r.HOUR))},o.getBoosterUnlockGemCost=function(){return Math.pow(9,1+n.D.boosterSlots-n.ORIGINAL_GAMEDATA.boosterSlots)};o.checkLaunchSpeedUpgrade=function(){return s("Launch Speed",n.D.launchSpeed,n.ORIGINAL_GAMEDATA.launchSpeed,10,2e3,function(e){return e},function(e){return 100*Math.pow(9,e/2)})},o.launchSpeedUpgrade=function(){n.D.launchSpeed+=10};function l(e){return 1+.25*Math.floor(e/10)}o.checkLauncherAimSpeedUpgrade=function(){return s("Launcher Aim Speed",n.D.launcherAimSpeed,n.ORIGINAL_GAMEDATA.launcherAimSpeed,10,500,function(e){return e},function(e){return 100*Math.pow(9,e/2)})},o.launcherAimSpeedUpgrade=function(){n.D.launcherAimSpeed+=10},o.getPrestigeGem=function(){return Math.floor(Math.pow(n.D.gold+Math.abs(n.D.goldSpend)+Math.abs(n.D.goldEarned),.15))},o.prestige=function(){n.D.gold=n.ORIGINAL_GAMEDATA.gold,n.D.goldSpend=n.ORIGINAL_GAMEDATA.goldSpend,n.D.goldEarned=n.ORIGINAL_GAMEDATA.goldEarned,n.D.goldHistory=n.ORIGINAL_GAMEDATA.goldHistory,n.D.goldPerMin=n.ORIGINAL_GAMEDATA.goldPerMin,n.D.goldPerMinUI=n.ORIGINAL_GAMEDATA.goldPerMinUI,n.D.goldPerMinMultiplier=n.ORIGINAL_GAMEDATA.goldPerMinMultiplier,n.D.currentLevelRows=n.ORIGINAL_GAMEDATA.currentLevelRows,n.D.currentLevelAvgHp=n.ORIGINAL_GAMEDATA.currentLevelAvgHp,n.D.launchSpeed=n.ORIGINAL_GAMEDATA.launchSpeed,n.D.launcherAimSpeed=n.ORIGINAL_GAMEDATA.launcherAimSpeed,n.D.fingerHitPower=n.ORIGINAL_GAMEDATA.fingerHitPower,n.D.balls=[new n.BallEntity]},o.getHitpower=function(e){return Math.round(e*l(e))},o.getHitpowerMultiplier=l,o.getHitpowerProgress=function(e){return(e-10*Math.floor(e/10))/10},cc._RF.pop()},{"../General/GameData":"GameData","../General/Helper":"Helper","./Ball":"Ball","./Booster":"Booster","./World":"World"}],GoldAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"3b9f3gXv8JL2LGjyA+OsdCo","GoldAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ResourceAnimation"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([s],t)}(a.default));o.default=l,cc._RF.pop()},{"./ResourceAnimation":"ResourceAnimation"}],GoldFlying:[function(e,t,o){"use strict";cc._RF.push(t,"515d0gmdeJIt5NiaE36AyqN","GoldFlying");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.EntityFlying=void 0;var a=e("../General/GameData"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.target=null,t}return r(t,e),t.prototype.makeNode=function(){var e=cc.instantiate(this.node);return e.parent=this.node.parent,e},t.prototype.animate=function(e,t){e.setWorldPosition(t);var o=e.scale;e.scale=0,e.opacity=0,a.G.audio.playEffect(a.G.audio.gold),cc.tween(e).to(.2,{scale:o,opacity:255},{easing:cc.easing.quadIn}).parallel(cc.tween().to(1,{position:this.target.getWorldPosition(),opacity:100,scale:.5*o},{easing:cc.easing.quadIn}),cc.tween().repeat(2,cc.tween().delay(.2).to(.15,{scaleX:0}).to(.15,{scaleX:1}))).call(function(){return e.destroy()}).start()},i([l(cc.Node)],t.prototype,"target",void 0),t}(cc.Component);o.EntityFlying=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.play=function(e){this.animate(this.makeNode(),e)},i([s],t)}(u);o.default=d,cc._RF.pop()},{"../General/GameData":"GameData"}],Helper:[function(e,t,o){"use strict";cc._RF.push(t,"757aeB5/mVAzLaA8b8imM0p","Helper"),Object.defineProperty(o,"__esModule",{value:!0}),o.xmur3=o.sfc32=o.normalizeAngle=o.debounce=o.getResourceUrl=o.findComponents=o.findComponent=o.uuidv4=o.hashCode=o.trimEnd=o.nearestNode=o.timeout=o.formatHM=o.formatHMS=o.getHMS=o.daysFromNow=o.getUrlParams=o.formatPercent=o.nf=o.HOUR=o.MINUTE=o.SECOND=void 0;var n=["","K","M","B","T","Qa","Qt","Sx","Sp","Oc","Nn","Dc","UDc","DDc","TDc","QaDc","QtDc","SxDc","SpDc","ODc","NDc","Vi","UVi","DVi","TVi","QaVi","QtVi","SxVi","SpVi","OcVi","NnVi","Tg","UTg","DTg","TTg","QaTg","QtTg","SxTg","SpTg","OcTg","NnTg","Qd","UQd","DQd","TQd","QaQd","QtQd","SxQd","SpQd","OcQd","NnQd","Qq","UQq","DQq","TQq","QaQq","QtQq","SxQq","SpQq","OcQq","NnQq","Sg"];function r(e){var t=0,o=0,n=0,r=Math.floor(e/1e3),i=Math.floor(r/60),a=Math.floor(i/60);return r<60?n=r:i<60?(n=r-60*i,o=i):(n=r-60*i,o=i-60*a,t=a),[t,o,n]}function i(e){return e<10?"0"+e:e}o.SECOND=1e3,o.MINUTE=60*o.SECOND,o.HOUR=60*o.MINUTE,o.nf=function(e){for(var t=0;e>=1e3;)e/=1e3,t++;return e=Math.floor(10*e)/10,t<n.length?e.toLocaleString()+n[t]:e.toLocaleString()+"E"+t},o.formatPercent=function(e,t){return void 0===t&&(t=1),(100*e).round(1)+"%"},o.getUrlParams=function(){return{}},o.daysFromNow=function(e){var t=Math.floor((Date.now()-e)/1e3/60/60/24);return t<=0?"Today":1===t?"Yesterday":t+" days ago"},o.getHMS=r,o.formatHMS=function(e){var t=r(e);return 0===t[0]?i(t[1])+":"+i(t[2]):i(t[0])+":"+i(t[1])+":"+i(t[2])},o.formatHM=function(e){var t=r(e);return 0===t[0]?t[1]+"m":0===t[1]?t[0]+"h":t[0]+"h"+i(t[1])+"m"},o.timeout=function(e){return new Promise(function(t){setTimeout(t,1e3*e)})},o.nearestNode=function(e,t,o){void 0===o&&(o=null);var n=1/0,r=null;return t.forEach(function(t){if(!o||o(t)){var i=t.getWorldPosition().sub(e).magSqr();i<n&&(r=t,n=i)}}),{node:r,distance:Math.sqrt(n)}},o.trimEnd=function(e){return e.replace(/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/,"")},o.hashCode=function(e){for(var t,o=0;o<e.length;o++)t=Math.imul(31,t)+e.charCodeAt(o)|0;return Math.abs(t)},o.uuidv4=function(){var e,t;for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},o.findComponent=function(e,t){return void 0===t&&(t=null),t?t.getComponent(e)||t.getComponentInChildren(e):cc.director.getScene().getComponentInChildren(e)},o.findComponents=function(e,t){return void 0===t&&(t=null),t?t.getComponents(e)||t.getComponentsInChildren(e):cc.director.getScene().getComponentsInChildren(e)},o.getResourceUrl=function(e){var t=cc.resources.getInfoWithPath(cc.path.mainFileName(e));if(t)return cc.assetManager.utils.getUrlWithUuid(t.uuid,{isNative:!0,nativeExt:cc.path.extname(e)});cc.warn('getResourceUrl" '+e+" does not exist!")},o.debounce=function(e,t,o){var n;return void 0===o&&(o=!1),function(){var r=this,i=arguments,a=function(){n=null,o||e.apply(r,i)},c=o&&!n;clearTimeout(n),n=setTimeout(a,t),c&&e.apply(r,i)}},o.normalizeAngle=function(e,t,o){for(;e<t;)e+=360;for(;e>o;)e-=360;return e},o.sfc32=function(e,t,o,n){return function(){var r=((e|=0)+(t|=0)|0)+(n|=0)|0;return n=n+1|0,e=t^t>>>9,t=(o|=0)+(o<<3)|0,o=(o=o<<21|o>>>11)+r|0,(r>>>0)/4294967296}},o.xmur3=function(e){var t,o;for(t=0,o=1779033703^e.length;t<e.length;t++)o=(o=Math.imul(o^e.charCodeAt(t),3432918353))<<13|o>>>19;return function(){return o=Math.imul(o^o>>>16,2246822507),o=Math.imul(o^o>>>13,3266489909),(o^=o>>>16)>>>0}},cc._RF.pop()},{}],LBService:[function(e,t,o){"use strict";cc._RF.push(t,"d99a0PQ31xPcbjuPeftxLPr","LBService");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{s(n.next(e))}catch(t){i(t)}}function c(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,c)}s((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.LBService=void 0;var i=e("./FBService"),a=!1,c=!1,s=function(){function e(e){this._db=new PouchDB(e)}return e.prototype.setScore=function(e){return n(this,void 0,void 0,function(){var t,o;return r(this,function(n){switch(n.label){case 0:return this._myScore?[3,2]:[4,this.getScore()];case 1:n.sent(),n.label=2;case 2:return this._myScore.score===e?[3,4]:(t=i.default.getUser(),this._myScore.score=e,this._myScore.name=t.name,this._myScore.photo=i.getPhoto(t),[4,this._db.put(this._myScore)]);case 3:o=n.sent(),this._myScore._rev=o.rev,n.label=4;case 4:return this.clearCache(),[2]}})})},e.prototype.setName=function(e){return n(this,void 0,void 0,function(){var t;return r(this,function(o){switch(o.label){case 0:return this._myScore?[3,2]:[4,this.getScore()];case 1:o.sent(),o.label=2;case 2:return this._myScore.name=e,[4,this._db.put(this._myScore)];case 3:return t=o.sent(),this._myScore._rev=t.rev,this.clearCache(),[2]}})})},e.prototype.clearCache=function(){this._global=null,this._friends=null},e.prototype.getScore=function(){return n(this,void 0,void 0,function(){var e,t,o,n;return r(this,function(r){switch(r.label){case 0:if(this._myScore)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,6]),e=this,[4,this._db.get(i.default.getUser().id)];case 2:return e._myScore=r.sent(),[3,6];case 3:return 404!==r.sent().status?[3,5]:(t=i.default.getUser(),o={_id:t.id,name:t.name,photo:i.getPhoto(t),score:0},cc.log("This is a new user, creating a score for the first time"),[4,this._db.put(o)]);case 4:n=r.sent(),this._myScore=Object.assign(o,{_rev:n.rev}),cc.assert(!!this._myScore._rev,"Leaderboard Item revision must present!"),r.label=5;case 5:return[3,6];case 6:return[2,this._myScore]}})})},e.prototype.getGlobalLeaderboard=function(e){return void 0===e&&(e=100),n(this,void 0,void 0,function(){var t;return r(this,function(o){switch(o.label){case 0:return this._global?[2,this._global]:a?[2,[]]:(a=!0,[4,this._db.find({selector:{},sort:[{score:"desc"}],limit:e})]);case 1:return t=o.sent(),a=!1,this._global=t.docs,[2,this._global]}})})},e.prototype.getFriendsLeaderboard=function(e){return void 0===e&&(e=100),n(this,void 0,void 0,function(){var t,o,n;return r(this,function(r){switch(r.label){case 0:return!i.default.isFB()||c?[2,[]]:this._friends?[2,this._friends]:(c=!0,[4,FBInstant.player.getConnectedPlayersAsync()]);case 1:return t=r.sent(),(o=t.map(function(e){return e.getID()})).push(FBInstant.player.getID()),[4,this._db.find({selector:{_id:{$in:o}},sort:[{score:"desc"}],limit:e})];case 2:return n=r.sent(),c=!1,this._friends=n.docs,[2,this._friends]}})})},e}();o.LBService=s,cc._RF.pop()},{"./FBService":"FBService"}],LabelBinding:[function(e,t,o){"use strict";cc._RF.push(t,"c842cP9BspJnoSkLTz630se","LabelBinding");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GameData"),c=e("./Helper"),s=cc._decorator,l=s.ccclass,u=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.property="",t.prefix="",t.postfix="",t.formatNumber=!1,t}return r(t,e),t.prototype.onLoad=function(){this.label=this.getComponent(cc.Label),this.property||cc.error("Please set `property` for LabelBinding"),this.current=a.D[this.property],this.updateLabel()},t.prototype.update=function(){this.current!==a.D[this.property]&&(this.current=a.D[this.property],this.updateLabel())},t.prototype.updateLabel=function(){var e=this.current.toString();this.formatNumber&&(e=c.nf(this.current)),this.label.string=this.prefix+e+this.postfix},i([u()],t.prototype,"property",void 0),i([u()],t.prototype,"prefix",void 0),i([u()],t.prototype,"postfix",void 0),i([u],t.prototype,"formatNumber",void 0),i([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./GameData":"GameData","./Helper":"Helper"}],LauncherPage:[function(e,t,o){"use strict";cc._RF.push(t,"2f90fWCjsVPJ5K9INm3gbSO","LauncherPage"),Object.defineProperty(o,"__esModule",{value:!0}),o.LauncherPage=void 0;var n=e("../CoreGame/Gameplay"),r=e("../CoreGame/World"),i=e("../General/Config"),a=e("../General/GameData"),c=e("../General/Helper"),s=e("../General/NativeSdk"),l=e("../MetaGame/GoldAnimation"),u=e("./UIHelper"),d=e("./UISystem");o.LauncherPage=function(){var e=m(".debug",[m(".btns",[m(".btn.outline.red.text-m",{onclick:function(){return n.addGold(10*a.D.gold)}},"x10 Cash"),m(".btn.outline.red.text-m",{onclick:function(){return a.D.gem+=10}},"+10 Gem")]),m(".sep10"),m(".btns",[m(".btn.outline.red.text-m",{onclick:function(){return a.D.level++}},"+1 Level"),m(".btn.outline.red.text-m",{onclick:function(){s.NativeSdk.removeItem(i.GAME_DATA_LS_KEY),location.reload()}},"Reset")]),m(".sep10"),m(".btns",[m(".btn.outline.red.text-m",{onclick:function(){a.D.lastTickAt-=30*c.MINUTE,a.saveData(),window.location.reload()}},"30m Offline"),m(".btn.outline.red.text-m",{onclick:function(){a.D.lastTickAt-=4*c.HOUR,a.saveData(),window.location.reload()}},"4h Offline")]),m(".sep10"),m(".btns",[m(".btn.outline.red.text-m",{onclick:function(){return a.D.investment=null}},"Clear Investment"),m(".btn.outline.red.text-m",{onclick:function(){a.D.investment&&(a.D.investment.time=0)}},"Mature Investment")]),m(".sep10"),m(".btns",[m(".btn.outline.red.text-m",{onclick:function(){a.D.version=null,a.saveData(),window.location.reload()}},"Test Update"),m(".btn.outline.red.text-m",{onclick:function(){c.findComponent(r.default).levelUp()}},"Test Level Up")]),m(".sep10")]),t=0;return{oninit:function(){t=Math.round(Math.max(60*a.D.goldPerMinUI,10))},view:function(){var o=n.checkLaunchSpeedUpgrade(),r=o[0],s=o[1],p=n.checkLauncherAimSpeedUpgrade(),f=p[0],h=p[1],y=n.fingerHitPowerUpgradeCost(),v=a.INVESTMENT_CONFIGS.map(function(e){var o=t*e.baseMultiplier;return[m(".hr"),m(".two-col.text-m",[m("div","Earn "+c.nf(o*e.returnMultiplier)+" in "+e.hour+" hours"),m("div.blue.pointer",{onclick:function(){n.trySpendGold(t)?(d.showToast("You have made "+c.nf(o)+" investment"),a.G.audio.playEffect(a.G.audio.kaching),a.D.investment={amount:o*e.returnMultiplier,time:Date.now()+e.hour*c.HOUR}):(a.G.audio.playEffect(a.G.audio.error),d.showToast("Not enough gold for this investment"))}},"Invest "+c.nf(o))])]});a.D.investment&&(v=a.D.investment.time>Date.now()?[m(".hr"),m(".two-col.text-m",[m("div","You will earn "+c.nf(a.D.investment.amount)),m("div.text-desc.row",[u.iconB("access_time",20,5),c.formatHM(a.D.investment.time-Date.now())])])]:[m(".hr"),m("div.green.text-m","Your investment is ready and can be claimed now"),m(".action.filled",{onclick:function(){d.routeTo("/main"),a.G.audio.playEffect(a.G.audio.freechest);var e=a.D.investment.amount;d.showToast("You have earned "+c.nf(e)+" from your investment"),c.findComponent(l.default).play(function(){return n.addGold(e/10)},10,cc.Camera.main.node),a.D.investment=null}},m("div","Claim "+c.nf(a.D.investment.amount)+" now"))]);var g=n.getPrestigeGem();return m(".modal.opaque",[u.uiHeaderRoute("Launcher"),m(".scrollable",[m(".box",[m("div.two-col.pointer",{onclick:function(){a.G.audio.playEffect(a.G.audio.click),a.D.autoAim=!a.D.autoAim}},[m("div","Auto Aim"),m(".ml10",{class:a.D.autoAim?"green":"grey"},a.D.autoAim?u.iconB("toggle_on"):u.iconB("toggle_off"))]),m(".hr"),m("div.two-col.pointer",{onclick:function(){a.D.autoCollect=!a.D.autoCollect,a.G.audio.playEffect(a.G.audio.click)}},[m("div","Auto Collect"),m(".ml10",{class:a.D.autoCollect?"green":"grey"},a.D.autoCollect?u.iconB("toggle_on"):u.iconB("toggle_off"))])]),m(".box",[m("div",[m("div","Earning Per Minute"),m(".text-s.text-desc","Only earnings from balls are used for offline earning calculations")]),m(".hr"),m(".two-col.text-m",[m("div","From Balls"),m(".text-desc",c.nf(a.D.goldPerMin)+"/min")]),m(".hr"),m(".two-col.text-m",[m("div","From Boosters"),m(".text-desc",c.nf(a.D.goldPerMinUI-a.D.goldPerMin)+"/min")])]),u.uiBoxContent("Launch Speed","The speed that the launcher will launch the ball",c.nf(a.D.launchSpeed),s,function(){n.trySpendGold(r)?(a.G.audio.playEffect(a.G.audio.click),n.launchSpeedUpgrade()):(a.G.audio.playEffect(a.G.audio.error),d.showToast("Cannot upgrade launch speed"))},a.D.gold>=r),u.uiBoxContent("Launcher Aim Speed","The speed that the launcher will aim at target when auto aim is activated",c.nf(a.D.launcherAimSpeed),h,function(){n.trySpendGold(f)?(a.G.audio.playEffect(a.G.audio.click),n.launcherAimSpeedUpgrade()):(a.G.audio.playEffect(a.G.audio.error),d.showToast("Cannot upgrade launch speed"))},a.D.gold>=f),m(".box",[m(".two-col",[m("div",[m("div","Finger Hitpower"),m(".text-s.text-desc","The damage that your finger tap will cast")]),m(".ml10.blue",c.nf(n.getHitpower(a.D.fingerHitPower)))]),m(".hr"),m(".two-col.text-m.text-desc",[m("div","Multiplier"),m("div",n.getHitpowerMultiplier(a.D.fingerHitPower).round(2)+"x")]),m(".mt5",[m(".progress",m(".fill",{style:{width:100*n.getHitpowerProgress(a.D.fingerHitPower)+"%"}}))]),m(".action.text-m",{onclick:function(){n.trySpendGold(y)?(a.G.audio.playEffect(a.G.audio.click),n.fingerHitPowerUpgrade()):(a.G.audio.playEffect(a.G.audio.error),d.showToast("Cannot upgrade finger hitpower"))},class:a.D.gold>=y?"":"disabled"},m("div","Upgrade $"+c.nf(y)))]),m(".box",[m("div",[m("div","Investment"),m(".text-s.text-desc","You can invest your gold now and get return in the future. You can only make one investment at a time")]),v]),m(".box",[m("div",[m("div","Prestige"),m(".text-s.text-desc","You can earn gems \ud83d\udc8e by resetting your gold and upgrades")]),m(".hr"),m("div.text-s.text-desc",["Gold, ball upgrade, launcher upgrade and physics upgrade ",m("span.red","will reset")]),m(".hr"),m("div.text-s.text-desc",["Level, gem, booster and energy \u26a1 ",m("span.green","will stay")]),m(".action.text-m",{style:{display:g>=10?"flex":"none"}},m("div",{onclick:function(){d.routeTo("/main"),d.showLoader(),n.prestige(),a.D.gem+=g,cc.director.loadScene(i.SCENES.Main,function(){d.hideLoader(),a.G.audio.playEffect(a.G.audio.kaching),d.showToast("You've got "+g+" gems \ud83d\udc8e with this prestige!")})}},"Prestige and Get "+g+" Gems")),m(".action.text-m.disabled",{style:{display:g<10?"flex":"none"}},m("div","Progress More to Enable Prestige"))]),u.uiBoxContent("Collect Time","The time it takes for launcher to collect the ball. You can reduce the time using a booster",c.nf(n.collectDelay())+"s",[u.iconB("offline_bolt",20,5),"Go to Booster"],function(){return d.routeTo("/booster")}),m(".box",[m(".two-col",[m("div",[m("div","Offline Earning Time"),m(".text-s.text-desc","You can extend offline earning time using boosters")]),m("div.ml10",{class:"green"},n.getOfflineEarningTime()/c.MINUTE+"m")]),m(".hr"),m(".two-col.text-s.text-desc",[m("div","Max offline earning time"),m("div",a.D.offlineEarningMinutes/c.MINUTE+"m")]),m(".hr"),m(".two-col.text-s.text-desc",[m("div","Extra time from booster"),m("div",(n.getOfflineEarningTime()-a.D.offlineEarningMinutes)/c.MINUTE+"m")]),m(".action.text-m",m("div",{onclick:function(){return d.routeTo("/booster")}},[u.iconB("offline_bolt",20,5),"Go to Booster"]))]),e])])}}},cc._RF.pop()},{"../CoreGame/Gameplay":"Gameplay","../CoreGame/World":"World","../General/Config":"Config","../General/GameData":"GameData","../General/Helper":"Helper","../General/NativeSdk":"NativeSdk","../MetaGame/GoldAnimation":"GoldAnimation","./UIHelper":"UIHelper","./UISystem":"UISystem"}],Launcher:[function(e,t,o){"use strict";cc._RF.push(t,"de90d0f/3ZCto7+AYZ+Tdxa","Launcher");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../General/GameData"),c=e("../General/Helper"),s=e("./Ball"),l=e("./World"),u=cc._decorator,d=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ballPrefab=null,t.ballsParent=null,t.canAutoAim=!0,t}return r(t,e),t.prototype.onLoad=function(){this.world=c.findComponent(l.default)},t.prototype.launch=function(e){if(e){var t=cc.instantiate(this.ballPrefab);t.parent=this.ballsParent,t.follow(this.node);var o=t.getComponent(s.default);o.velocity=cc.v2(0,-a.D.launchSpeed),o.entity=e,o.entity.launchStat++,this.canAutoAim=a.D.autoAim}else cc.warn("Trying to launch a ball with null BallEntity, please check caller",(new Error).stack)},t.prototype.update=function(e){if(a.D.autoAim&&this.canAutoAim){var t=this.world.blocksParent.children[0];if(t){var o=t.getWorldPosition(),n=o.add(cc.v3(Math.sign(cc.winSize.width/2-o.x)*t.width/4,0)),r=a.D.launcherAimSpeed*e;Math.abs(this.node.x-n.x)>=r?this.node.x+=r*Math.sign(n.x-this.node.x):this.node.x=n.x}}},t.prototype.onTouchMove=function(e){var t=e.getLocation().x-e.getPreviousLocation().x;this.node.x=cc.misc.clampf(this.node.x+t,l.BLOCK_SIZE/2,cc.winSize.width-l.BLOCK_SIZE/2),this.canAutoAim=!1},i([p(cc.Prefab)],t.prototype,"ballPrefab",void 0),i([p(cc.Node)],t.prototype,"ballsParent",void 0),i([d],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../General/GameData":"GameData","../General/Helper":"Helper","./Ball":"Ball","./World":"World"}],Leaderboard:[function(e,t,o){"use strict";cc._RF.push(t,"850f0n18H9ETYFzw+OCs3oF","Leaderboard"),Object.defineProperty(o,"__esModule",{value:!0}),o.leaderboard=void 0;var n=e("../General/FBService"),r=e("../General/GameData"),i=e("./UISystem"),a=n.default.getUser();o.leaderboard=function(){var e=[];function t(){e=[],m.redraw(),("friends"===m.route.param("type")?r.G.lb.getFriendsLeaderboard():r.G.lb.getGlobalLeaderboard()).then(function(t){e=t,m.redraw()})}return{oninit:function(){t()},onupdate:function(){t()},view:function(){var t="friends"===m.route.param("type");return m("div.modal.opaque",[m("div.header",[t?"Friends Leaderboard":"Global Leaderboard",m("div.close",{onclick:function(){i.routeTo("/main"),r.G.audio.playEffect(r.G.audio.click)}})]),n.default.isFB()?m("div.tabs",[m(m.route.Link,{class:t?"active":"",href:"/leaderboard?type=friends",onclick:function(){return r.G.audio.playEffect(r.G.audio.click)}},"Friends \ud83e\udd47"),m(m.route.Link,{class:t?"":"active",href:"/leaderboard?type=global",onclick:function(){return r.G.audio.playEffect(r.G.audio.click)}},"Global \ud83e\udd47")]):m("div"),m("div.scrollable",m("table.leaderboard",e.map(function(e,t){return m("tr",{class:e._id===a.id?"me":""},[m("td.w25",t+1),m("td.w50",m("img.avatar-small",{src:n.getPhotoFromLeaderboard(e)})),m("td",e.name),m("td.text-right",e.score)])})))])}}},cc._RF.pop()},{"../General/FBService":"FBService","../General/GameData":"GameData","./UISystem":"UISystem"}],LevelUpPage:[function(e,t,o){"use strict";cc._RF.push(t,"794b27h/MZHsa2YsmxmBh/8","LevelUpPage"),Object.defineProperty(o,"__esModule",{value:!0}),o.LevelUpPage=void 0;var n=e("../CoreGame/Gameplay"),r=e("../General/GameData"),i=e("../General/Helper"),a=e("../General/NativeSdk"),c=e("../MetaGame/GoldAnimation"),s=e("./UISystem");o.LevelUpPage=function(){var e=!0,t=0,o=!1;return{oninit:function(){t=30*Math.max(100,r.D.goldPerMin),a.NativeSdk.canShowRewardVideo().then(function(e){return o=e}),setTimeout(function(){e=!1,r.G.audio.playEffect(r.G.audio.levelup),m.redraw()},1500)},onremove:function(){r.G.audio.playEffect(r.G.audio.freechest),i.findComponent(c.default).play(function(){return n.addGold(t/10)},10,cc.Camera.main.node)},view:function(){var n=[m("div.loader")];return e||(n=[m(".text-l.text-center","Level Up!"),m(".sep10"),m(".text-desc.text-m","Welcome to Level "+r.D.level+", here's some gold to help you get ahead!"),m(".sep10"),m("div.text-center",m("img",{src:i.getResourceUrl("/images/RewardGift.png"),style:{width:"25%"}})),m(".sep10"),m(".sep10"),m(".btn.outline",{style:{display:o?"flex":"none"},onclick:function(){s.showLoader(),a.NativeSdk.showRewardVideo().then(function(){s.hideLoader(),t*=2,s.showToast("Level up gold x2 is successful!"),s.routeTo("/main")}).catch(function(){s.showToast("Failed to watch a reward ad"),s.routeTo("/main"),s.hideLoader()})}},"Claim "+i.nf(2*t)+" Gold \ud83c\udfac"),m(".sep10"),m(".btn.outline.grey",{onclick:function(){return s.routeTo("/main")}},"Claim "+i.nf(t)+" Gold")]),m("div.modal.opaque",m("div.container",n))}}},cc._RF.pop()},{"../CoreGame/Gameplay":"Gameplay","../General/GameData":"GameData","../General/Helper":"Helper","../General/NativeSdk":"NativeSdk","../MetaGame/GoldAnimation":"GoldAnimation","./UISystem":"UISystem"}],NativeSdk:[function(e,t,o){"use strict";cc._RF.push(t,"25e62bE3E9APadrfCTtXqe5","NativeSdk");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{s(n.next(e))}catch(t){i(t)}}function c(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,c)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NativeSdk=o.isIOS=o.IOSNativeSdk=o.isGamepix=o.isCrazyGames=o.isGM=o.isGD=o.isAndroid=o.isFB=o.loadJS=o.nativeBridgePromise=o.DefaultNativeSdk=o.MINUTE=void 0;var c=e("../UI/Lib/idb-keyval"),s=e("./ANEvents"),l=e("./Config");o.MINUTE=6e4;var u=function(){function e(){}return e.prototype.name=function(){return"Unknown"},e.prototype.loadAd=function(){},e.prototype.showRewardVideo=function(){return Promise.reject()},e.prototype.showInterstitial=function(){return Promise.reject()},e.prototype.canShowRewardVideo=function(){return Promise.resolve(!1)},e.prototype.canShowInterstitial=function(){return Promise.resolve(!1)},e.prototype.getItem=function(e){return i(this,void 0,Promise,function(){var t;return a(this,function(o){switch(o.label){case 0:return[4,c.idbGet(e)];case 1:return(t=o.sent())?[2,JSON.parse(t)]:[2,null]}})})},e.prototype.setItem=function(e,t){c.idbSet(e,t)},e.prototype.removeItem=function(e){c.idbDel(e)},e.prototype.celebrate=function(){navigator.vibrate&&navigator.vibrate(500)},e.prototype.openUrl=function(e){window.open(e,"_blank")},e.prototype.scheduleNotifications=function(){},e.prototype.quit=function(){},e}();function d(e){return new Promise(function(t,o){var n=function(){window.removeEventListener(s.AD_EVENT_COMPLETED,r),window.removeEventListener(s.AD_EVENT_CANCELLED,i),window.removeEventListener(s.AD_EVENT_ERROR,i)},r=function(){n(),t()},i=function(){n(),o("Failed to load ad")};window.addEventListener(s.AD_EVENT_COMPLETED,r),window.addEventListener(s.AD_EVENT_CANCELLED,i),window.addEventListener(s.AD_EVENT_ERROR,i),e()})}function p(e){return new Promise(function(t,o){if(null!==document.querySelector('head > script[src="'+e+'"]'))return t("Already Loaded");var n=document.createElement("script");n.src=e,n.type="text/javascript",n.async=!0,document.head.appendChild(n),n.onload=t,n.onerror=o})}o.DefaultNativeSdk=u,o.nativeBridgePromise=d,o.loadJS=p;var f=null,m=null,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.name=function(){return"FB"},t.prototype.loadAd=function(){var e=FBInstant.getSupportedAPIs();if(-1!==e.indexOf("getRewardedVideoAsync")&&null===f){var t=null;FBInstant.getRewardedVideoAsync(l.REWARD_VIDEO_PLACEMENT_ID).then(function(e){return t=e,e.loadAsync()}).then(function(){f=t}).catch(function(e){cc.log(e),f=null})}if(-1!==e.indexOf("getInterstitialAdAsync")&&null===m){var o=null;FBInstant.getInterstitialAdAsync(l.INTERSTITIAL_PLACEMENT_ID).then(function(e){return o=e,e.loadAsync()}).then(function(){m=o}).catch(function(e){cc.log(e),m=null})}},t.prototype.showRewardVideo=function(){var e=this;return f?f.showAsync().then(function(){f=null,e.loadAd()}):m?m.showAsync().then(function(){m=null,e.loadAd()}):void 0},t.prototype.showInterstitial=function(){var e=this;return m?m.showAsync().then(function(){m=null,e.loadAd()}):f?f.showAsync().then(function(){f=null,e.loadAd()}):void 0},t.prototype.scheduleNotifications=function(e){FBInstant.setSessionData({scheduledMessage:e.map(function(e){return{time:Date.now()+e.delayInMs,message:e.title+": "+e.content}})})},t.prototype.canShowRewardVideo=function(){return Promise.resolve(null!==m||null!==f)},t.prototype.canShowInterstitial=function(){return Promise.resolve(null!==m||null!==f)},t.prototype.getItem=function(e){return new Promise(function(t){FBInstant.player.getDataAsync([e]).then(function(t){return t[e]}).then(function(e){t(JSON.parse(e))}).catch(function(){return t(null)})})},t.prototype.setItem=function(e,t){var o;FBInstant.player.setDataAsync(((o={})[e]=t,o))},t.prototype.removeItem=function(e){var t;FBInstant.player.setDataAsync(((t={})[e]=null,t))},t}(u);function y(){return-1===window.location.href.indexOf(":7456")&&"undefined"!=typeof FBInstant}o.isFB=y;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.name=function(){return"Android"},t.prototype.loadAd=function(){},t.prototype.showRewardVideo=function(){return d(function(){return AndroidSdk.showRewardVideo()})},t.prototype.showInterstitial=function(){return d(function(){return AndroidSdk.showInterstitial()})},t.prototype.canShowRewardVideo=function(){return Promise.resolve(AndroidSdk.canShowRewardVideo())},t.prototype.canShowInterstitial=function(){return Promise.resolve(AndroidSdk.canShowInterstitial())},t.prototype.openUrl=function(e){AndroidSdk.openURL(e)},t.prototype.scheduleNotifications=function(e){e.forEach(function(e,t){return AndroidSdk.scheduleNotification(e.title,e.content,e.delayInMs,t)})},t.prototype.getItem=function(e){var t=AndroidSdk.getItem(e);return Promise.resolve(t?JSON.parse(t):null)},t.prototype.setItem=function(e,t){AndroidSdk.setItem(e,t)},t.prototype.removeItem=function(e){AndroidSdk.removeItem(e)},t.prototype.quit=function(){AndroidSdk.quit()},t}(u);function g(){return"undefined"!=typeof AndroidSdk}o.isAndroid=g;var _=null;w()&&(cc.game.pause(),window.GD_OPTIONS={gameId:l.GD_GAME_ID,onEvent:function(e){switch(e.name){case"SDK_GAME_START":cc.game.resume(),window.dispatchEvent(new Event(s.AD_EVENT_ERROR));break;case"SDK_GAME_PAUSE":cc.game.pause();break;case"COMPLETE":window.dispatchEvent(new Event(s.AD_EVENT_COMPLETED));break;case"SKIPPED":window.dispatchEvent(new Event(s.AD_EVENT_CANCELLED))}}},p("https://html5.api.gamedistribution.com/main.min.js").then(function(){cc.log("GameDistribution.com SDK loaded"),_=window.gdsdk}));var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.name=function(){return"GameDistribution"},t.prototype.loadAd=function(){_.preloadAd("rewarded")},t.prototype.showRewardVideo=function(){var e=this;return d(function(){_.showAd("rewarded"),e.loadAd()})},t.prototype.showInterstitial=function(){return d(function(){return _.showAd()})},t.prototype.canShowRewardVideo=function(){return Promise.resolve(!0)},t.prototype.canShowInterstitial=function(){return Promise.resolve(!0)},t}(u);function w(){return window.location.href.includes("gamedistribution")}o.isGD=w;var S=null;D()&&(cc.game.pause(),window.SDK_OPTIONS={gameId:l.GM_GAME_ID,onEvent:function(e){switch(e.name){case"SDK_GAME_START":cc.game.resume(),window.dispatchEvent(new Event(s.AD_EVENT_ERROR));break;case"SDK_GAME_PAUSE":cc.game.pause();break;case"COMPLETE":window.dispatchEvent(new Event(s.AD_EVENT_COMPLETED));break;case"SKIPPED":window.dispatchEvent(new Event(s.AD_EVENT_CANCELLED))}}},p("https://api.gamemonetize.com/sdk.js").then(function(){cc.log("GameMonetize.com SDK loaded"),S=window.sdk}));var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.name=function(){return"GameMonetize"},t.prototype.loadAd=function(){},t.prototype.showRewardVideo=function(){return d(function(){return S.showBanner()})},t.prototype.showInterstitial=function(){return d(function(){return S.showBanner()})},t.prototype.canShowRewardVideo=function(){return Promise.resolve(!0)},t.prototype.canShowInterstitial=function(){return Promise.resolve(!0)},t}(u);function D(){return window.location.href.includes("gamemonetize")}o.isGM=D;var G=0,P=null;if(A()){document.documentElement.style.setProperty("--saib","50px");var O=document.createElement("div");O.id="mobile-banner",O.style.cssText="width:320px;height:50px;overflow:hidden;position:absolute;left:50%;bottom:0;margin-left:-160px;z-index:2;",document.body.appendChild(O),p("https://sdk.crazygames.com/crazygames-sdk-v1.js").then(function(){function e(){P.requestBanner([{containerId:O.id,size:"320x50"}])}cc.log("CrazyGames.com SDK loaded"),(P=window.CrazyGames.CrazySDK.getInstance()).init(),e(),setInterval(e,1e4),P.addEventListener("adStarted",function(){cc.game.pause()}),P.addEventListener("adError",function(){window.dispatchEvent(new Event(s.AD_EVENT_ERROR)),cc.game.resume()}),P.addEventListener("adFinished",function(){window.dispatchEvent(new Event(s.AD_EVENT_COMPLETED)),cc.game.resume()})})}var R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.name=function(){return"CrazyGames"},t.prototype.loadAd=function(){},t.prototype.showRewardVideo=function(){return d(function(){P.requestAd("rewarded"),G=Date.now()})},t.prototype.showInterstitial=function(){return d(function(){return P.requestAd("midgame")})},t.prototype.canShowRewardVideo=function(){return Promise.resolve(Date.now()-G>3*o.MINUTE)},t.prototype.canShowInterstitial=function(){return Promise.resolve(P.hasAdblock)},t.prototype.celebrate=function(){P.happytime()},t}(u);function A(){var e=window.location.href;return e.includes("crazygames")||e.includes("1001juegos")||e.includes("speelspelletjes.nl")||e.includes("onlinegame.co.id")}o.isCrazyGames=A,T()&&p("https://integration.gamepix.com/sdk/3.0/gamepix.sdk.3.0.js").then(function(){cc.log("Gamepix.com SDK loaded"),window.GamePix.loading(100),window.GamePix.pause=function(){return cc.game.pause()},window.GamePix.resume=function(){return cc.game.resume()}});var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.name=function(){return"Gamepix"},t.prototype.loadAd=function(){},t.prototype.showRewardVideo=function(){return new Promise(function(e,t){window.GamePix.rewardAd().then(function(o){o.success?e():t()}).catch(t)})},t.prototype.showInterstitial=function(){return window.GamePix.gameStop(),Promise.resolve()},t.prototype.canShowRewardVideo=function(){return Promise.resolve(!0)},t.prototype.canShowInterstitial=function(){return Promise.resolve(!0)},t.prototype.getItem=function(e){var t=window.GamePix.localStorage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)},t.prototype.setItem=function(e,t){window.GamePix.localStorage.setItem(e,t)},t.prototype.removeItem=function(e){window.GamePix.localStorage.removeItem(e)},t.prototype.celebrate=function(){window.GamePix.happyMoment()},t}(u);function T(){return window.location.href.includes("gamepix")}o.isGamepix=T;var B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.name=function(){return"iOS"},t.prototype.loadAd=function(){},t.prototype.showRewardVideo=function(){return d(function(){return window.webkit.messageHandlers.native.postMessage({name:"showRewardVideo"})})},t.prototype.showInterstitial=function(){return d(function(){return window.webkit.messageHandlers.native.postMessage({name:"showInterstitial"})})},t.prototype.canShowRewardVideo=function(){return new Promise(function(e){window.addEventListener(s.AD_EVENT_IOS_CAN_SHOW_AD,function t(o){window.removeEventListener(s.AD_EVENT_IOS_CAN_SHOW_AD,t),e(!!o.detail)}),window.webkit.messageHandlers.native.postMessage({name:"canShowRewardVideo"})})},t.prototype.canShowInterstitial=function(){return new Promise(function(e){window.addEventListener(s.AD_EVENT_IOS_CAN_SHOW_AD,function t(o){window.removeEventListener(s.AD_EVENT_IOS_CAN_SHOW_AD,t),e(!!o.detail)}),window.webkit.messageHandlers.native.postMessage({name:"canShowInterstitial"})})},t.prototype.getItem=function(e){return new Promise(function(t){window.addEventListener(s.EVENT_GET_ITEM,function e(o){window.removeEventListener(s.EVENT_GET_ITEM,e),t(o.detail?o.detail:null)}),window.webkit.messageHandlers.native.postMessage({name:"getItem",key:e})})},t.prototype.removeItem=function(e){window.webkit.messageHandlers.native.postMessage({name:"removeItem",key:e})},t.prototype.setItem=function(e,t){window.webkit.messageHandlers.native.postMessage({name:"setItem",key:e,value:t})},t.prototype.openUrl=function(e){window.webkit.messageHandlers.native.postMessage({name:"openURL",url:e})},t.prototype.scheduleNotifications=function(e){e.forEach(function(e,t){return window.webkit.messageHandlers.native.postMessage({name:"scheduleNotification",title:e.title,content:e.content,delayInMs:e.delayInMs,id:t})})},t}(u);function I(){return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.native}o.IOSNativeSdk=B,o.isIOS=I,o.NativeSdk=new u,I()?o.NativeSdk=new B:g()?o.NativeSdk=new v:y()?o.NativeSdk=new h:A()?o.NativeSdk=new R:w()?o.NativeSdk=new b:D()?o.NativeSdk=new E:T()&&(o.NativeSdk=new C),cc.log("NativeSDK Platform:",o.NativeSdk.name()),cc._RF.pop()},{"../UI/Lib/idb-keyval":"idb-keyval","./ANEvents":"ANEvents","./Config":"Config"}],NetworkError:[function(e,t,o){"use strict";cc._RF.push(t,"03530M0WWFAC5UMPq2pUB1c","NetworkError"),Object.defineProperty(o,"__esModule",{value:!0}),o.NetworkError=void 0,o.NetworkError=function(){return{view:function(){return m("div.modal.opaque",m("div.container",[m("h2.text-center","Cannot Connect to Internet"),m("p.text-desc","The game requires an active network connection. Please check your network status and device settings."),m(".sep10"),m("p.text-desc","If the problem persists, please contact support: hi@fishpondstudio.com"),m(".sep10"),m(".sep10"),m(".sep10"),m(".btn.outline",{onclick:function(){return window.location.reload()}},"Retry")]))}}},cc._RF.pop()},{}],OfflineEarningPage:[function(e,t,o){"use strict";cc._RF.push(t,"22b88SUjDNGZa+pGFEwiCaE","OfflineEarningPage"),Object.defineProperty(o,"__esModule",{value:!0}),o.OfflineEarningPage=void 0;var n=e("../CoreGame/Gameplay"),r=e("../General/GameData"),i=e("../General/Helper"),a=e("../General/NativeSdk"),c=e("../MetaGame/GoldAnimation"),s=e("./UIHelper"),l=e("./UISystem");o.OfflineEarningPage=function(){var e,t=0,o=0,u=0,d=0,p=!1;return{oninit:function(){cc.game.pause();var c=Date.now(),s=c-r.D.lastTickAt;t=Math.round(s/i.MINUTE),o=Math.round(Math.min(n.getOfflineEarningTime(),s)/i.MINUTE),u=r.D.goldPerMin,r.D.lastTickAt=c,e=setInterval(function(){return a.NativeSdk.canShowRewardVideo().then(function(e){p=e,m.redraw()})},500)},onremove:function(){cc.game.resume(),e&&clearInterval(e),d>0&&(r.G.audio.playEffect(r.G.audio.freechest),n.consumeOfflineEarningBooster(),i.findComponent(c.default).play(function(){return n.addGold(d/10)},10,cc.Camera.main.node))},view:function(){return d=u*o,m(".modal.opaque",[s.uiHeaderRoute("Offline Earning","/main"),m(".scrollable",[m(".box",[m(".two-col",[m("div",[m("div","Offline Time"),m(".text-desc.text-s","This is the total time you have been away")]),m(".row.ml10",[s.iconB("access_time",24,5),t+"m"])]),m(".hr"),m(".two-col",[m("div",[m("div","Offline Earning Time"),m(".text-desc.text-s","This is the time you have earned offline earning")]),m(".row",[s.iconB("access_time",24,5),o+"m"])]),m(".hr"),m(".two-col.text-desc.text-m.mb5",[m("div","Offline earning time"),m("div",r.D.offlineEarningMinutes/i.MINUTE+"m")]),m(".two-col.text-desc.text-m",[m("div","Extra time from booster"),m("div",(n.getOfflineEarningTime()-r.D.offlineEarningMinutes)/i.MINUTE+"m")]),m(".hr"),m(".two-col",[m("div","Offline Earn Rate"),m("div",i.nf(u)+"/m")]),m(".hr"),m(".two-col",[m("div","Total Offline Earning"),m(".blue","\ud83d\udcb0 "+i.nf(d))])]),m(".btn.mh15.text-m",{class:p?"":"disabled",onclick:function(){p?(l.showLoader(),a.NativeSdk.showRewardVideo().then(function(){l.hideLoader(),d*=2,l.showToast("Offline earnings x2 is successful"),l.routeTo("/main")}).catch(function(){l.showToast("Failed to watch a reward ad"),l.routeTo("/main"),l.hideLoader()})):(r.G.audio.playEffect(r.G.audio.error),l.showToast("We are still loading reward ad, please wait"))}},p?"Watch a video\ud83c\udfac x2 Earning":"Reward Ad Loading..."),m(".sep10"),m(".btn.mh15.text-m",{onclick:function(){n.trySpendGem(5)?(d*=3,l.showToast("Offline earnings x3 is successful"),l.routeTo("/main")):(r.G.audio.playEffect(r.G.audio.error),l.showToast("You don't have enough gems"))}},"Spend 5\ud83d\udc8e x3 Earning")])])}}},cc._RF.pop()},{"../CoreGame/Gameplay":"Gameplay","../General/GameData":"GameData","../General/Helper":"Helper","../General/NativeSdk":"NativeSdk","../MetaGame/GoldAnimation":"GoldAnimation","./UIHelper":"UIHelper","./UISystem":"UISystem"}],OnlyFBInstant:[function(e,t,o){"use strict";cc._RF.push(t,"f1decLxvl1NO5GdsWJyEUFh","OnlyFBInstant");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./FBService"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inverse=!1,t}return r(t,e),t.prototype.onLoad=function(){this.inverse?this.node.active=!a.default.isFB():this.node.active=a.default.isFB()},i([l()],t.prototype,"inverse",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./FBService":"FBService"}],OnlyWeb:[function(e,t,o){"use strict";cc._RF.push(t,"bb9001Z9P9JBZcBfGnZpk2w","OnlyWeb");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./NativeSdk"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inverse=!1,t}return r(t,e),t.prototype.onLoad=function(){var e=!a.isFB()&&!a.isAndroid()&&!a.isIOS();this.inverse?this.node.active=!e:this.node.active=e},i([l()],t.prototype,"inverse",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./NativeSdk":"NativeSdk"}],Performance:[function(e,t){"use strict";cc._RF.push(t,"03b854fxAJGxoccCLB2DJeu","Performance"),cc._RF.pop()},{}],PhysicsPage:[function(e,t,o){"use strict";cc._RF.push(t,"faf86SB5pRMHqZfn5wUU/It","PhysicsPage"),Object.defineProperty(o,"__esModule",{value:!0}),o.PhysicsPage=void 0;var n=e("../CoreGame/BallPhysics"),r=e("../CoreGame/Gameplay"),i=e("../General/GameData"),a=e("./UIHelper"),c=e("./UISystem");o.PhysicsPage=function(){return{view:function(){var e=cc.misc.clampf(parseInt(m.route.param("id"),10),0,i.D.balls.length-1),t=i.D.balls[e];return m(".modal.opaque",[a.uiHeaderRoute("Physics"),m(".col.subheader",[m("div",{class:e>0?"blue":"grey",onclick:function(){e>0&&c.routeTo("/physics",{id:e-1})}},a.iconB("arrow_back_ios")),m(".f1.text-center.text-l","Ball #"+(e+1)),m("div.blue",{class:e<i.D.balls.length-1?"blue":"grey",onclick:function(){e<i.D.balls.length-1&&c.routeTo("/physics",{id:e+1})}},a.iconB("arrow_forward_ios"))]),m(".scrollable",n.BALL_PHYSICS.map(function(e){var o=e.upgradeCheck(t),n=o[0],s=o[1];return a.uiBoxContent(e.name,e.desc,e.valueLabel(t),s,function(){r.trySpendGold(n)?(e.upgrade(t),i.G.audio.playEffect(i.G.audio.click)):(i.G.audio.playEffect(i.G.audio.error),c.showToast("Cannot upgrade bounce"))},i.D.gold>n)}))])}}},cc._RF.pop()},{"../CoreGame/BallPhysics":"BallPhysics","../CoreGame/Gameplay":"Gameplay","../General/GameData":"GameData","./UIHelper":"UIHelper","./UISystem":"UISystem"}],PlayerInput:[function(e,t,o){"use strict";cc._RF.push(t,"659a0hniwBDyrbDVgg/ztA1","PlayerInput");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Launcher"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.launcher=null,t}return r(t,e),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.launcher.onTouchMove,this.launcher)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_MOVE,this.launcher.onTouchMove,this.launcher)},i([l(a.default)],t.prototype,"launcher",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./Launcher":"Launcher"}],Pointer:[function(e,t,o){"use strict";cc._RF.push(t,"8e0ddv/l0hMU4XlFMMHIfSY","Pointer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,l.bind(this,this.node)),this.node.on(cc.Node.EventType.MOUSE_LEAVE,u.bind(this,this.node))},t.prototype.onDisable=function(){u(this.node),this.node.off(cc.Node.EventType.MOUSE_ENTER,l.bind(this,this.node)),this.node.off(cc.Node.EventType.MOUSE_LEAVE,u.bind(this,this.node))},i([c],t)}(cc.Component));function l(e){e.opacity>0&&0!==e.scale&&(cc.game.canvas.style.cursor="pointer")}function u(e){e.opacity>0&&0!==e.scale&&(cc.game.canvas.style.cursor="default")}o.default=s,cc._RF.pop()},{}],ResourceAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"e002d3GsrxD0Y7gnaKQSiOG","ResourceAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../General/GameData"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.target=null,t}return r(t,e),t.prototype.play=function(e,t,o){for(var n=cc.v3(cc.winSize.width/2,cc.winSize.height/2),r=0;r<t;r++){var i=cc.instantiate(this.node);i.parent=this.node.parent,i.scale=.5,i.follow(o),i.opacity=0,cc.tween(i).to(.8+cc.randf(0,.2),{position:n.add(cc.v3(cc.randf(-100,100),cc.randf(-100,100))),opacity:255,scale:1},{easing:cc.easing.quadInOut}).delay(.5+.1*r).to(1,{position:i.relativeFrom(this.target),scale:.5,opacity:0},{easing:cc.easing.quadInOut}).call(function(){e(),a.G.audio.playEffect(a.G.audio.gold)}).start()}},i([l(cc.Node)],t.prototype,"target",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../General/GameData":"GameData"}],ResourceLoader:[function(e,t,o){"use strict";cc._RF.push(t,"462bfpz+6NDGJ+x/RwvmPm2","ResourceLoader");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../CoreGame/Booster"),c=e("../CoreGame/Gameplay"),s=e("../General/Config"),l=e("../General/FBService"),u=e("../General/GameData"),d=e("./UISystem"),p=cc._decorator,f=p.ccclass,m=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.styles=[],t}return r(t,e),t.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node),u.G.res&&cc.warn("Multiple ResourceLoader found!"),u.G.res=this;var e=document.createElement("style");e.innerHTML=this.styles.join("")+".debug { display: none; }",document.head.appendChild(e),d.showLoader(),cc.debug.setDisplayStats(!1),cc.director.getPhysicsManager().enabled=!0;var t=l.default.getUser();cc.log("Current user:",t),Promise.all([u.loadData()]).then(function(e){var t=e[0];cc.log("Game data loaded:",t);var o=null;for(var n in t?!t.version||t.version<u.D.version?(u.D.blockHitSound=t.blockHitSound,u.D.sound=t.sound,u.D.music=t.music,u.D.hasSetName=t.hasSetName,c.beforeFirstEverGameStart(),o=function(){return d.routeTo("/update",{gold:1.2*(t.gold+Math.abs(t.goldSpend))})}):Object.assign(u.D,t):(c.beforeFirstEverGameStart(),o=function(){return d.routeTo("/first-time")}),u.D.boosters)Object.prototype.hasOwnProperty.call(u.D.boosters,n)&&(a.BOOSTERS[n]||delete u.D.boosters[n]);u.D.activeBoosters=u.D.activeBoosters.filter(function(e){return!!a.BOOSTERS[e]}),u.D.recipes=u.D.recipes.filter(function(e){return!!a.BOOSTERS[e.booster]}),u.markDataClean(),u.markLeaderbaordClean(),cc.audioEngine.setMusicVolume(u.D.music?.5:0),c.beforeGameStart(),cc.director.loadScene(s.SCENES.Main,function(){return d.StartUI(o)})}).catch(function(){return d.routeTo("/network-error")})},i([m({type:[cc.Asset]})],t.prototype,"styles",void 0),i([f],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../CoreGame/Booster":"Booster","../CoreGame/Gameplay":"Gameplay","../General/Config":"Config","../General/FBService":"FBService","../General/GameData":"GameData","./UISystem":"UISystem"}],RewardAdIcon:[function(e,t,o){"use strict";cc._RF.push(t,"a3bddeT1mZANaFkUjF0ksbe","RewardAdIcon");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../General/NativeSdk"),c=e("../UI/UISystem"),s=cc._decorator,l=s.ccclass,u=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t}return r(t,e),t.prototype.onClick=function(){c.routeTo("/reward-ad")},t.prototype.onLoad=function(){this.sprite.active=!1,a.NativeSdk.loadAd(),this.checkForAds(),this.schedule(this.checkForAds,1)},t.prototype.checkForAds=function(){var e=this;a.NativeSdk.canShowRewardVideo().then(function(t){if(t){if(e.sprite.active)return;e.sprite.active=!0,e.sprite.x=100,cc.tween(e.sprite).to(1,{x:0},{easing:cc.easing.smooth}).repeatForever(cc.tween().to(.1,{angle:-5}).to(.1,{angle:5}).to(.1,{angle:-5}).to(.1,{angle:5}).to(.1,{angle:-5}).to(.1,{angle:5}).to(.1,{angle:-5}).to(.1,{angle:5}).to(.05,{angle:0}).delay(5)).start()}else e.sprite.stopAllActions(),e.sprite.active=!1})},i([u(cc.Node)],t.prototype,"sprite",void 0),i([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../General/NativeSdk":"NativeSdk","../UI/UISystem":"UISystem"}],RewardAdPage:[function(e,t,o){"use strict";cc._RF.push(t,"2b9325q+45IC6guyXaJ5ojw","RewardAdPage"),Object.defineProperty(o,"__esModule",{value:!0}),o.RewardAdPage=void 0;var n=e("../CoreGame/Gameplay"),r=e("../General/GameData"),i=e("../General/Helper"),a=e("../General/NativeSdk"),c=e("../MetaGame/GoldAnimation"),s=e("./UISystem");o.RewardAdPage=function(){var e=0;return{oninit:function(){e=60*Math.max(100,r.D.goldPerMin)},view:function(){return m(".modal.opaque",m(".container",[m(".close",{onclick:function(){return s.routeTo("/main")}}),m("h2.text-center","Special Offer"),m(".text-center.text-desc",["Watch an ad and get ",m("span.blue",i.nf(e))," gold?"]),m(".sep10"),m(".sep10"),m("div.text-center",m("img",{src:i.getResourceUrl("/images/RewardGift.png"),style:{width:"25%"}})),m(".sep10"),m(".sep10"),m(".btn.outline",{onclick:function(){s.showLoader(),a.NativeSdk.showRewardVideo().then(function(){s.hideLoader(),s.routeTo("/main"),r.G.audio.playEffect(r.G.audio.freechest),i.findComponent(c.default).play(function(){return n.addGold(e/10)},10,cc.Camera.main.node)}).catch(function(){s.hideLoader(),s.routeTo("/main")})}},"Get "+i.nf(e)+" Gold")]))}}},cc._RF.pop()},{"../CoreGame/Gameplay":"Gameplay","../General/GameData":"GameData","../General/Helper":"Helper","../General/NativeSdk":"NativeSdk","../MetaGame/GoldAnimation":"GoldAnimation","./UISystem":"UISystem"}],RoundCorner:[function(e,t,o){"use strict";cc._RF.push(t,"20605e18zxE+aN7ES724v7/","RoundCorner");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=a.executeInEditMode,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.radiusInPx=0,t}return r(t,e),t.prototype.onLoad=function(){var e=this;this.getComponents(cc.RenderComponent).forEach(function(t){var o=e.radiusInPx/e.node.width;o=o>=.5?.5:o;var n=e.radiusInPx/e.node.height;n=n>=.5?.5:n;var r=t.getMaterial(0);r.setProperty("xRadius",o),r.setProperty("yRadius",n),t.setMaterial(0,r)})},i([s()],t.prototype,"radiusInPx",void 0),i([c,l],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],RunEverySecond:[function(e,t,o){"use strict";cc._RF.push(t,"1dc338VpcJBvpy1erdfaNrH","RunEverySecond"),Object.defineProperty(o,"__esModule",{value:!0}),o.RunEverySecond=void 0;var n=e("../General/GameData"),r=e("../UI/UISystem"),i=e("./Booster"),a=e("./Gameplay");o.RunEverySecond=function(){var e=Date.now();e-n.D.lastTickAt>r.OFFLINE_EARNING_MIN_TIME?r.routeTo("/offline-earning"):(n.D.lastTickAt=e,i.tickBooster(),a.calculateGoldPerMin(),n.saveData(),m.redraw())},cc._RF.pop()},{"../General/GameData":"GameData","../UI/UISystem":"UISystem","./Booster":"Booster","./Gameplay":"Gameplay"}],SetYourName:[function(e,t,o){"use strict";cc._RF.push(t,"93aa3TP7JFPY4kiOmlEn5qF","SetYourName");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../General/FBService"),c=e("../General/GameData"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){a.default.isFB()||c.D.hasSetName?this.node.active=!1:(cc.tween(this.node).repeatForever(cc.tween().to(.5,{x:this.node.x+10},{easing:cc.easing.quadIn}).to(.5,{x:this.node.x},{easing:cc.easing.quadOut}).delay(1)).start(),this.schedule(this.poll,1,cc.macro.REPEAT_FOREVER,0))},t.prototype.poll=function(){c.D.hasSetName&&(this.node.active=!1)},i([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../General/FBService":"FBService","../General/GameData":"GameData"}],Settings:[function(e,t,o){"use strict";cc._RF.push(t,"c5bd2gSkf1CvrjFjyDvcHr/","Settings"),Object.defineProperty(o,"__esModule",{value:!0}),o.Settings=void 0;var n=e("../CoreGame/Gameplay"),r=e("../General/Config"),i=e("../General/FBService"),a=e("../General/GameData"),c=e("../General/Helper"),s=e("../General/NativeSdk"),l=e("./UIConstants"),u=e("./UIHelper"),d=e("./UISystem");function p(e){if(e!==i.default.getUser().name){if(e.length<5||e.length>20)return a.G.audio.playEffect(a.G.audio.error),d.showToast("Your name must be 5 ~ 20 chars"),void(e=i.default.getUser().name);var t=a.D.hasSetName?r.NAME_CHANGE_COST:0;n.trySpendGold(t)?(a.G.lb.setName(e),i.default.setName(e),a.G.audio.playEffect(a.G.audio.levelup),a.D.hasSetName=!0,t>0?d.showToast("You have changed your name, which costs "+c.nf(r.NAME_CHANGE_COST)+" gold"):d.showToast("You have set your name. Changing your name after will cost "+c.nf(r.NAME_CHANGE_COST)+" gold"),m.redraw()):(e=i.default.getUser().name,d.showToast("You don't have enough gold to change your name"))}}o.Settings=function(){var e=i.default.getUser().name;return{oninit:function(){i.default.isFB()&&(a.D.hasSetName=!0)},view:function(){var t=[m("div.two-col.pointer",{onclick:function(){a.D.sound=!a.D.sound,a.G.audio.playEffect(a.G.audio.click)}},[m("div.text-desc","Sound Effect"),a.D.sound?m("div.green",u.iconB("toggle_on")):m("div.grey",u.iconB("toggle_off"))]),m(".hr"),m("div.two-col.pointer",{onclick:function(){a.D.blockHitSound=!a.D.blockHitSound,a.G.audio.playEffect(a.G.audio.click)}},[m("div.text-desc","Ball Sound Effect"),a.D.blockHitSound?m("div.green",u.iconB("toggle_on")):m("div.grey",u.iconB("toggle_off"))]),m(".hr"),m("div.two-col",[m("div.text-desc","Support"),m("div.text-s",{style:{lineHeight:"24px"}},"hi@fishpondstudio.com")]),m("div",{style:{display:s.isAndroid()?"block":"none"}},[m(".hr"),m("div.two-col",{onclick:function(){return s.NativeSdk.openUrl(r.GOOGLE_PLAY_URL)}},[m("div.text-desc","Review on Google Play"),m("div.blue.pointer",u.iconB("rate_review"))])]),m("div",{style:{display:s.isIOS()?"block":"none"}},[m(".hr"),m("div.two-col",{onclick:function(){return s.NativeSdk.openUrl(r.APPSTORE_URL)}},[m("div.text-desc","Review on AppStore"),m("div.blue.pointer",u.iconB("rate_review"))])])],o=m("div",e);return s.isFB()||(o=m("div",[m("input[type=text][placeholder='Set a Name']",{oninput:function(t){return e=t.target.value},onblur:function(){return p(e)},value:e}),m("div.text-desc.text-s",a.D.hasSetName?["TAP TO CHANGE",m("br"),"COST "+c.nf(r.NAME_CHANGE_COST)+" GOLD"]:"TAP TO CHANGE")])),m("div.modal.opaque",[u.uiHeaderRoute("Settings","/main"),m("div.banner.text-m",{style:{display:a.D.hasSetName?"none":"flex"}},"Setting your name for the first time is free, changing it after will cost "+c.nf(r.NAME_CHANGE_COST)+" gold"),m("div.scrollable",[m("div.discord.row.pointer",{onclick:function(){return s.NativeSdk.openUrl("https://discord.gg/xgNxpsM")}},[m("div","Join our Discord to learn about what's coming and give your feedback"),m("img.ml10",{src:c.getResourceUrl("/images/Discord.png")})]),m("div.box",[m("div.two-col",[m("div.text-desc","Name"),o]),m(".hr"),m("div.two-col",[m("div.text-desc","Avatar"),m("div",m("img.avatar",{src:i.getPhoto(i.default.getUser())}))])]),m("div.text-center",{style:{display:l.STORE_BADGES.length>0?"block":"none"}},l.STORE_BADGES),m("div.box",t),m("div.text-center",{style:{display:s.isCrazyGames()?"block":"none"}},m("img",{src:c.getResourceUrl("images/CrazyGames.png")}))])])}}},cc._RF.pop()},{"../CoreGame/Gameplay":"Gameplay","../General/Config":"Config","../General/FBService":"FBService","../General/GameData":"GameData","../General/Helper":"Helper","../General/NativeSdk":"NativeSdk","./UIConstants":"UIConstants","./UIHelper":"UIHelper","./UISystem":"UISystem"}],Shake:[function(e,t,o){"use strict";cc._RF.push(t,"0f821WSWWFOf7m3JA9z2DnI","Shake");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.delay=3,t}return r(t,e),t.prototype.onLoad=function(){cc.tween(this.node).repeatForever(cc.tween().to(.1,{angle:-5}).to(.1,{angle:5}).to(.1,{angle:-5}).to(.1,{angle:5}).to(.1,{angle:-5}).to(.1,{angle:5}).to(.05,{angle:0}).delay(this.delay)).start()},i([s],t.prototype,"delay",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],TrophyAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"8b673vNx8ZMSqpIVUDyAHyP","TrophyAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ResourceAnimation"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([s],t)}(a.default));o.default=l,cc._RF.pop()},{"./ResourceAnimation":"ResourceAnimation"}],UIConstants:[function(e,t,o){"use strict";cc._RF.push(t,"08c5bWim81FDrj/foKL90WV","UIConstants"),Object.defineProperty(o,"__esModule",{value:!0}),o.STORE_BADGES=void 0;var n=e("../General/Config"),r=e("../General/Helper"),i=e("../General/NativeSdk");o.STORE_BADGES=[],cc.game.once(cc.game.EVENT_ENGINE_INITED,function(){i.isAndroid()||i.isIOS()||(o.STORE_BADGES=[m("a",{href:n.APPSTORE_URL,target:"_blank"},m("img",{style:{width:"45%"},src:r.getResourceUrl("images/AppStore.png")})),m("a",{href:n.GOOGLE_PLAY_URL,target:"_blank"},m("img",{style:{width:"45%",marginLeft:"2.5%"},src:r.getResourceUrl("images/GooglePlay.png")}))])}),cc._RF.pop()},{"../General/Config":"Config","../General/Helper":"Helper","../General/NativeSdk":"NativeSdk"}],UIHelper:[function(e,t,o){"use strict";cc._RF.push(t,"34687T7uHtO/rTYAazCwOHR","UIHelper");var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.popNotification=o.getNotification=o.buildNotifications=o.uiBoxContent=o.uiResources=o.uiHeaderRoute=o.uiHeaderAction=o.iconB=o.icon=void 0;var r=e("../General/Config"),i=e("../General/GameData"),a=e("../General/Helper"),c=e("../General/NativeSdk"),s=e("./UISystem");function l(e,t,o,r,i){return void 0===t&&(t=24),void 0===o&&(o=0),void 0===r&&(r={}),void 0===i&&(i={}),m("i.mi",n({style:n({fontSize:t+"px",marginRight:o+"px"},r)},i),e)}function u(e,t){return m(".header",[m(".resources",[m("div","\ud83d\udcb0 "+a.nf(i.D.gold)),m("div","\ud83c\udfc5 LVL"+i.D.level),m("div","\ud83d\udc8e "+a.nf(i.D.gem))]),m(".title",e),m(".close",{onclick:t})])}o.icon=l,o.iconB=function(e,t,o,n,r){return void 0===t&&(t=24),void 0===o&&(o=0),void 0===n&&(n={}),void 0===r&&(r={}),Object.assign(n,{display:"block"}),l(e,t,o,n,r)},o.uiHeaderAction=u,o.uiHeaderRoute=function(e,t){return void 0===t&&(t="/main"),u(e,function(){s.routeTo(t)})},o.uiResources=function(){return m(".resources",[m("div","\ud83d\udcb0 "+a.nf(i.D.gold)),m("div","\ud83c\udfc5 LVL"+i.D.level),m("div","\ud83d\udc8e "+a.nf(i.D.gem))])},o.uiBoxContent=function(e,t,o,n,r,i){return void 0===i&&(i=!0),m(".box",[m(".two-col",[m("div",[m("div",e),m(".text-s.text-desc",t)]),m(".ml10.blue",o)]),m(".action.text-m",{onclick:r,class:i?"":"disabled"},m("div",n))])};var d=[];function p(){d.shift()}o.buildNotifications=function(){var e;(e=i.WHATS_NEW.filter(function(e,t){return t>i.D.lastPatchNoteIndex})).length>0&&d.push(m(".box",[m(".orange","What's New"),e.map(function(e){return[m(".hr"),m(".text-s.text-desc",e)]}),m(".action",{onclick:function(){i.G.audio.playEffect(i.G.audio.click),i.D.lastPatchNoteIndex=i.WHATS_NEW.length-1,p(),console.log(d)}},m("div","Ok, Got It!"))])),c.isIOS()||c.isAndroid()||d.push(m(".box.yellow",[m(".orange","Play on Mobile"),m(".mt5.text-m.text-desc","You can play Idle Pinball Breakout on iOS and Android now!"),m(".action",[m("div",{onclick:function(){i.G.audio.playEffect(i.G.audio.click),c.NativeSdk.openUrl(r.APPSTORE_URL)}},"iOS"),m("div",{onclick:function(){i.G.audio.playEffect(i.G.audio.click),c.NativeSdk.openUrl(r.GOOGLE_PLAY_URL)}},"Android"),m("div",{onclick:function(){i.G.audio.playEffect(i.G.audio.click),p()}},"Got it")])]))},o.getNotification=function(){return d[0]||m("div")},o.popNotification=p,cc._RF.pop()},{"../General/Config":"Config","../General/GameData":"GameData","../General/Helper":"Helper","../General/NativeSdk":"NativeSdk","./UISystem":"UISystem"}],UISystem:[function(e,t,o){"use strict";cc._RF.push(t,"ea8c1msni9HBZ2FWmQN9456","UISystem"),Object.defineProperty(o,"__esModule",{value:!0}),o.promptPopups=o.hideLoader=o.showLoader=o.showToast=o.UI_ROUTES=o.urlTo=o.routeTo=o.StartUI=o.OFFLINE_EARNING_MIN_TIME=o.tabHeight=void 0;var n=e("../General/AYService"),r=e("../General/Config"),i=e("../General/FBService"),a=e("../General/GameData"),c=e("../General/Helper"),s=e("../General/NativeSdk"),l=e("./AddBoosterPage"),u=e("./BallPage"),d=e("./BoosterDetailPage"),p=e("./BoosterPackPage"),f=e("./BoosterPage"),h=e("./CraftPage"),y=e("./FirstTime"),v=e("./LauncherPage"),g=e("./LevelUpPage"),_=e("./NetworkError"),b=e("./OfflineEarningPage"),w=e("./PhysicsPage"),S=e("./RewardAdPage"),E=e("./Settings"),D=e("./UIHelper"),G=e("./UpdatePage"),P=document.createElement("div"),O=document.createElement("div"),R=document.createElement("div");R.innerHTML='<div class="loading"><div class="loader"></div></div>',R.style.display="none";o.tabHeight=100*cc.view.getFrameSize().height/cc.winSize.height,document.body.appendChild(P),document.body.appendChild(O),document.body.appendChild(R);var A={oncreate:function(){return cc.game.canvas.focus()},view:function(){}};function C(e,t){void 0===t&&(t={}),a.G.audio.playEffect(a.G.audio.click);var o="";for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o+=n+"="+t[n]);o.length>0&&(o="?"+o),T(e+o)}function T(e){n.AYService.trackEvent("ui_route_"+e.substring(1).split("?")[0]),m.route.set(e)}o.OFFLINE_EARNING_MIN_TIME=c.MINUTE,o.StartUI=function(e){i.default.setSessionData({scheduledMessage:[{time:Date.now()+144e5,message:"Your free chest is ready, open now and claim your free gold!"},{time:Date.now()+864e5,message:"Your new daily challenges are ready, open now to accept the challenge!"},{time:Date.now()+2592e5,message:"Your free chest is ready, claim it now to unlock a new one!"},{time:Date.now()+432e6,message:"Lots of players have surpassed your trophies, open now and catch up!"},{time:Date.now()+6048e5,message:"Your challengers await, open now and see if you are up for the challenge!"}]}),D.buildNotifications(),m.route(P,"/main",o.UI_ROUTES),e?e():Date.now()-a.D.lastTickAt>o.OFFLINE_EARNING_MIN_TIME?C("/offline-earning"):C("/main"),x()},o.routeTo=C,o.urlTo=T,document.addEventListener("error",function(e){var t=e.target;t.classList.contains("avatar")&&(t.src=i.getPhotoFromId(t.src))},!0);var B=0;window.addEventListener("onBackButtonPressed",function(){var e=document.querySelector(".close");e?e.dispatchEvent(new MouseEvent("click")):m.route.get().startsWith("/main")&&cc.director.getScene().name===r.SCENES.Main&&(Date.now()-B>2e3?(B=Date.now(),k("Press back again to exit game")):s.NativeSdk.quit())}),o.UI_ROUTES={"/main":A,"/network-error":_.NetworkError,"/settings":E.Settings,"/first-time":y.FirstTime,"/booster":f.BoosterPage,"/booster-detail":d.BoosterDetailPage,"/add-booster":l.AddBoosterPage,"/ball":u.BallPage,"/launcher":v.LauncherPage,"/physics":w.PhysicsPage,"/offline-earning":b.OfflineEarningPage,"/booster-pack":p.BoosterPackPage,"/reward-ad":S.RewardAdPage,"/update":G.UpdatePage,"/level-up":g.LevelUpPage,"/craft":h.CraftPage};var I=null;function k(e){I&&(clearTimeout(I),O.innerHTML=""),O.innerHTML='<div class="toast" style="bottom:'+o.tabHeight+'px">'+e+"</div>",I=setTimeout(function(){O.innerHTML="",I=null},3500)}function x(){cc.game.resume(),R.style.display="none"}o.showToast=k,o.showLoader=function(){cc.game.pause(),R.innerHTML='<div class="loading"><div class="loader"></div><div class="tips">\ud83d\udca1 '+r.TIPS.randOne()+"</div></div>",R.style.display="flex"},o.hideLoader=x;var M=[];o.promptPopups=function(){return 0!==M.length&&(M.shift()(),!0)},cc._RF.pop()},{"../General/AYService":"AYService","../General/Config":"Config","../General/FBService":"FBService","../General/GameData":"GameData","../General/Helper":"Helper","../General/NativeSdk":"NativeSdk","./AddBoosterPage":"AddBoosterPage","./BallPage":"BallPage","./BoosterDetailPage":"BoosterDetailPage","./BoosterPackPage":"BoosterPackPage","./BoosterPage":"BoosterPage","./CraftPage":"CraftPage","./FirstTime":"FirstTime","./LauncherPage":"LauncherPage","./LevelUpPage":"LevelUpPage","./NetworkError":"NetworkError","./OfflineEarningPage":"OfflineEarningPage","./PhysicsPage":"PhysicsPage","./RewardAdPage":"RewardAdPage","./Settings":"Settings","./UIHelper":"UIHelper","./UpdatePage":"UpdatePage"}],Unread:[function(e,t,o){"use strict";cc._RF.push(t,"ab1e7BhjeBHt5UGd1E5A1LH","Unread");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../General/GameData"),c=e("./BallPhysics"),s=e("./Gameplay"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boosterUnread=null,t.launcherUnread=null,t.ballUnread=null,t.physicsUnread=null,t}return r(t,e),t.prototype.onLoad=function(){this.runEverySecond(),this.schedule(this.runEverySecond,1,cc.macro.REPEAT_FOREVER,0)},t.prototype.runEverySecond=function(){this.updateBoosterUnread(),this.updateLauncherUnread(),this.updateBallUnread(),this.updatePhysicsUnread()},t.prototype.updatePhysicsUnread=function(){var e=0;a.D.balls.forEach(function(t){c.BALL_PHYSICS.forEach(function(o){var n=o.upgradeCheck(t),r=n[0];n[1],a.D.gold>=r&&e++})}),e>0?(this.physicsUnread.string=String(e),this.physicsUnread.node.parent.active=!0):this.physicsUnread.node.parent.active=!1},t.prototype.updateBallUnread=function(){var e=a.D.balls.filter(function(e,t){return a.D.gold>=s.ballUpgradeCost(t,e.hitPower)}).length;e>0?(this.ballUnread.string=String(e),this.ballUnread.node.parent.active=!0):this.ballUnread.node.parent.active=!1},t.prototype.updateLauncherUnread=function(){var e=0,t=s.checkLaunchSpeedUpgrade(),o=t[0],n=(t[1],s.fingerHitPowerUpgradeCost());a.D.gold>=o&&e++,a.D.gold>=n&&e++,(!a.D.investment||a.D.investment&&a.D.investment.time<=Date.now())&&e++,e>0?(this.launcherUnread.string=String(e),this.launcherUnread.node.parent.active=!0):this.launcherUnread.node.parent.active=!1},t.prototype.updateBoosterUnread=function(){var e=a.D.boosterSlots-a.D.activeBoosters.length;a.D.nextBoosterTime<=Date.now()&&e++,e>0?(this.boosterUnread.string=String(e),this.boosterUnread.node.parent.active=!0):this.boosterUnread.node.parent.active=!1},i([d(cc.Label)],t.prototype,"boosterUnread",void 0),i([d(cc.Label)],t.prototype,"launcherUnread",void 0),i([d(cc.Label)],t.prototype,"ballUnread",void 0),i([d(cc.Label)],t.prototype,"physicsUnread",void 0),i([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../General/GameData":"GameData","./BallPhysics":"BallPhysics","./Gameplay":"Gameplay"}],UpdatePage:[function(e,t,o){"use strict";cc._RF.push(t,"c1643Ob+DdJ6Y1wXHvfT8e7","UpdatePage"),Object.defineProperty(o,"__esModule",{value:!0}),o.UpdatePage=void 0;var n=e("../General/GameData"),r=e("../General/Helper"),i=e("./UISystem");o.UpdatePage=function(){return{oninit:function(){cc.game.pause()},onremove:function(){cc.game.resume()},view:function(){var e=parseInt(m.route.param("gold"),10)||5e3;return m("div.modal.opaque",m("div.container",[m(".text-l.text-center","Game Updated"),m(".sep10"),m(".text-desc.text-m","We have made some very big updates to the game - your previous progress is not compatible any more."),m(".sep10"),m(".blue.text-m","To compensate for this, we have refunded all the gold you've spent, plus 20% extra as a thank you."),m(".sep10"),m(".sep10"),m(".btn.outline",{onclick:function(){n.D.gold+=e,i.routeTo("/first-time")}},"Claim "+r.nf(e)+" Gold")]))}}},cc._RF.pop()},{"../General/GameData":"GameData","../General/Helper":"Helper","./UISystem":"UISystem"}],World:[function(e,t,o){"use strict";cc._RF.push(t,"8501fYfZARIn5CVv1P+p3p7","World");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BLOCK_SIZE=void 0;var a=e("../General/Config"),c=e("../General/GameData"),s=e("../UI/UISystem"),l=e("./Block"),u=e("./Gameplay"),d=e("./Launcher"),p=e("./RunEverySecond"),f=cc._decorator,m=f.ccclass,h=f.property;o.BLOCK_SIZE=80;var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blockPrefabs=[],t.blocksParent=null,t.worldCamera=null,t.launcher=null,t.progress=null,t.minY=0,t}return r(t,e),t.prototype.onEnable=function(){this.node.on(l.EVENT_BLOCK_DESTROYED,this.onBlockDestroyed,this),this.generateLevel(),this.setAndCalculatProgress(),this.schedule(p.RunEverySecond.bind(this),1,cc.macro.REPEAT_FOREVER,0),cc.view.on("canvas-resize",this.adjustCameraY,this)},t.prototype.onDisable=function(){this.node.off(l.EVENT_BLOCK_DESTROYED,this.onBlockDestroyed),cc.view.off("canvas-resize",this.adjustCameraY,this)},t.prototype.start=function(){this.adjustCameraY()},t.prototype.adjustCameraY=function(){var e=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sait"),10)||0,t=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--saib"),10)||0;this.worldCamera.node.y=this.launcher.node.y-(cc.winSize.height-e-t)/2+210+e},t.prototype.generateLevel=function(){c.D.currentLevelAvgHp||(c.D.currentLevelAvgHp=c.D.balls.reduce(function(e,t){return u.getHitpower(t.hitPower)+e},0)/c.D.balls.length);var e=c.D.currentLevelAvgHp*Math.max(c.D.level,5),t=c.D.currentLevelRows||u.rowCountForLevel();cc.log("Generating levels, current AverageBallHitPower =",c.D.currentLevelAvgHp,"AvarageBlockHP =",e,"Rows = ",t);for(var n=0;n<t;n++)this.spawnRow(-n*o.BLOCK_SIZE,e);this.minY=this.blocksParent.children[0].getWorldPosition().y},t.prototype.spawnRow=function(e,t){for(var o=cc.randi(3,8),n=640/o,r=0;r<o;r++){var i=this.blockPrefabs.randOne();if(i){var a=cc.instantiate(i);a.position=cc.v3(r*n+n/2,e),a.parent=this.blocksParent,a.angle=cc.randf(-45,45),a.getComponent(l.default).life=cc.misc.clampf(cc.randi(.5*t,2*t),1,1/0)}}},t.prototype.goTo=function(e,t){s.routeTo(t)},t.prototype.getRowCount=function(){var e=this.blocksParent.children;return Math.round(1+(e[0].y-e[e.length-1].y)/o.BLOCK_SIZE)},t.prototype.onBlockDestroyed=function(){var e=this.blocksParent.children[0];if(e){this.setAndCalculatProgress();var t=e.getWorldPosition();t.y<this.minY&&(cc.tween(this.worldCamera.node).by(.5,{y:t.y-this.minY},{easing:cc.easing.quadInOut}).start(),cc.tween(this.launcher.node).by(.5,{y:t.y-this.minY},{easing:cc.easing.quadInOut}).start(),this.minY=t.y)}else this.levelUp()},t.prototype.levelUp=function(){c.D.level++,c.D.currentLevelAvgHp=0,c.D.currentLevelRows=0,s.routeTo("/level-up"),cc.director.loadScene(a.SCENES.Main)},t.prototype.setAndCalculatProgress=function(){c.D.currentLevelRows=this.getRowCount(),this.progress.string=(100-100*this.getRowCount()/u.rowCountForLevel()).round(1)+"%"},i([h([cc.Prefab])],t.prototype,"blockPrefabs",void 0),i([h(cc.Node)],t.prototype,"blocksParent",void 0),i([h(cc.Camera)],t.prototype,"worldCamera",void 0),i([h(d.default)],t.prototype,"launcher",void 0),i([h(cc.Label)],t.prototype,"progress",void 0),i([m],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../General/Config":"Config","../General/GameData":"GameData","../UI/UISystem":"UISystem","./Block":"Block","./Gameplay":"Gameplay","./Launcher":"Launcher","./RunEverySecond":"RunEverySecond"}],"idb-keyval":[function(e,t,o){"use strict";cc._RF.push(t,"66852WL1xFLRL9SCs+VwwUe","idb-keyval"),Object.defineProperty(o,"__esModule",{value:!0}),o.idbKeys=o.idbClear=o.idbDel=o.idbSet=o.idbGet=o.Store=void 0;var n,r=function(){function e(e,t){void 0===e&&(e="keyval-store"),void 0===t&&(t="keyval"),this.storeName=t,this._dbp=new Promise(function(o,n){var r=indexedDB.open(e,1);r.onerror=function(){return n(r.error)},r.onsuccess=function(){return o(r.result)},r.onupgradeneeded=function(){r.result.createObjectStore(t)}})}return e.prototype._withIDBStore=function(e,t){var o=this;return this._dbp.then(function(n){return new Promise(function(r,i){var a=n.transaction(o.storeName,e);a.oncomplete=function(){return r()},a.onabort=a.onerror=function(){return i(a.error)},t(a.objectStore(o.storeName))})})},e}();function i(){return n||(n=new r),n}o.Store=r,o.idbGet=function(e,t){var o;return void 0===t&&(t=i()),t._withIDBStore("readonly",function(t){o=t.get(e)}).then(function(){return o.result})},o.idbSet=function(e,t,o){return void 0===o&&(o=i()),o._withIDBStore("readwrite",function(o){o.put(t,e)})},o.idbDel=function(e,t){return void 0===t&&(t=i()),t._withIDBStore("readwrite",function(t){t.delete(e)})},o.idbClear=function(e){return void 0===e&&(e=i()),e._withIDBStore("readwrite",function(e){e.clear()})},o.idbKeys=function(e){void 0===e&&(e=i());var t=[];return e._withIDBStore("readonly",function(e){(e.openKeyCursor||e.openCursor).call(e).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}}).then(function(){return t})},cc._RF.pop()},{}]},{},["Ball","BallPhysics","Block","Booster","Collect","Gameplay","Launcher","PlayerInput","RunEverySecond","Unread","World","ANEvents","AYService","AudioController","AutoResizeCanvas","AvatarLoader","Config","Extensions","FBService","FixiOS14","GameData","Helper","LBService","LabelBinding","NativeSdk","OnlyFBInstant","OnlyWeb","Performance","Pointer","RoundCorner","Clock","Critical","EnergyAnimation","EnergyFlying","GoldAnimation","GoldFlying","ResourceAnimation","RewardAdIcon","SetYourName","Shake","TrophyAnimation","AddBoosterPage","BallPage","BoosterDetailPage","BoosterPackPage","BoosterPage","CraftPage","FirstTime","LauncherPage","Leaderboard","LevelUpPage","idb-keyval","NetworkError","OfflineEarningPage","PhysicsPage","ResourceLoader","RewardAdPage","Settings","UIConstants","UIHelper","UISystem","UpdatePage"]);
